
const ToCanvas=(opts,canvas)=>{_Render(bwipp_lookup(opts.bcid),opts,DrawingCanvas(opts,canvas));return canvas;}
var $$=null;var $j=0;var $k=[];var $0={$error:new Map,};function $forall(o,cb){if(o instanceof Uint8Array){for(var i=0,l=o.length;i<l;i++){$k[$j++]=o[i];if(cb&&cb())break;}}else if(o instanceof Array){for(var a=o.b,i=o.o,l=o.o+o.length;i<l;i++){$k[$j++]=a[i];if(cb&&cb())break;}}else if(typeof o==='string'){for(var i=0,l=o.length;i<l;i++){$k[$j++]=o.charCodeAt(i);if(cb&&cb())break;}}else if(o instanceof Map){for(var keys=o.keys(),i=0,l=o.size;i<l;i++){var id=keys.next().value;$k[$j++]=id;$k[$j++]=o.get(id);if(cb&&cb())break;}}else{for(var id in o){$k[$j++]=id;$k[$j++]=o[id];if(cb&&cb())break;}}}
function $eq(a,b){if(typeof a==='string'&&typeof b==='string'){return a==b;}
if(a instanceof Uint8Array&&b instanceof Uint8Array){if(a.length!=b.length){return false;}
for(var i=0,l=a.length;i<l;i++){if(a[i]!=b[i]){return false;}}
return true;}
if(a instanceof Uint8Array&&typeof b==='string'||b instanceof Uint8Array&&typeof a==='string'){if(a instanceof Uint8Array){a=$z(a);}else{b=$z(b);}
return a==b;}
return a==b;}
function $ne(a,b){return!$eq(a,b);}
function $z(s){if(s instanceof Uint8Array){for(var i=0,l=s.length;i<l&&s[i];i++);if(i<l){return String.fromCharCode.apply(null,s.subarray(0,i));}
return String.fromCharCode.apply(null,s)}
return''+s;}
function $a(a){if(!arguments.length){for(var i=$j-1;i>=0&&$k[i]!==Infinity;i--);if(i<0){throw new Error('array-marker-not-found');}
a=$k.splice(i+1,$j-1-i);$j=i;}else if(!(a instanceof Array)){a=new Array(+arguments[0]);for(var i=0,l=a.length;i<l;i++){a[i]=null;}}
a.b=a;a.o=0;return a;}
function $get(s,k){if(s instanceof Uint8Array){return s[k];}
if(typeof s==='string'){return s.charCodeAt(k);}
if(s instanceof Array){return s.b[s.o+k];}
if(k instanceof Uint8Array){return s.get($z(k));}
return s.get(k);}
function _Render(encoder,params,drawing){var text=params.text;if(!text){throw new ReferenceError('bwip-js: bar code text not specified.');}
FixupOptions(params);var scale=params.scale||2;var scaleX=+params.scaleX||scale;var scaleY=+params.scaleY||scaleX;var rotate=params.rotate||'N';var bw=new BWIPJS(drawing);var opts={};for(var id in params){if(!BWIPJS_OPTIONS[id]){opts[id]=params[id];}}
if(opts.alttext){opts.includetext=true;}
if(+opts.height&&encoder!=bwipp_pharmacode2){opts.height=opts.height/25.4||0.5;}
if(+opts.width){opts.width=opts.width/25.4||0;}
bw.scale(scaleX,scaleY);bwipp_encode(bw,encoder,text,opts);return bw.render();}
function bwipp_lookup(symbol){if(!symbol){throw new Error("bwipp.undefinedEncoder: bcid is not defined");}
switch(symbol.replace(/-/g,"_")){case"datamatrix":return bwipp_datamatrix;}
throw new Error("bwipp.unknownEncoder: unknown encoder name: "+symbol);}
function bwipp_datamatrix(){var $1={};$1.options=$k[--$j];$1.barcode=$k[--$j];$1.dontdraw=false;$1.columns=0;$1.rows=0;$1.format="square";$1.version="unset";$1.parse=false;$1.parsefnc=false;$1.encoding="auto";$1.mailmark=false;$1.raw=false;$1.dmre=false;$1.dindmre=false;$1.isodmre=false;$forall($1.options,function(){var _3=$k[--$j];$1[$k[--$j]]=_3;});if($ne($1.version,"unset")){$search($1.version,"x");$j--;$1.rows=$k[--$j];$j--;$1.columns=$k[--$j];}
$1.columns=~~$z($1.columns);$1.rows=~~$z($1.rows);$1.isodmre=$1.dmre;$k[$j++]=Infinity;$k[$j++]=$a([10,10,1,1,5,1]);$k[$j++]=$a([12,12,1,1,7,1]);$k[$j++]=$a([14,14,1,1,10,1]);$k[$j++]=$a([16,16,1,1,12,1]);$k[$j++]=$a([18,18,1,1,14,1]);$k[$j++]=$a([20,20,1,1,18,1]);$k[$j++]=$a([22,22,1,1,20,1]);$k[$j++]=$a([24,24,1,1,24,1]);$k[$j++]=$a([26,26,1,1,28,1]);$k[$j++]=$a([32,32,2,2,36,1]);$k[$j++]=$a([36,36,2,2,42,1]);$k[$j++]=$a([40,40,2,2,48,1]);$k[$j++]=$a([44,44,2,2,56,1]);$k[$j++]=$a([48,48,2,2,68,1]);$k[$j++]=$a([52,52,2,2,84,2]);$k[$j++]=$a([64,64,4,4,112,2]);$k[$j++]=$a([72,72,4,4,144,4]);$k[$j++]=$a([80,80,4,4,192,4]);$k[$j++]=$a([88,88,4,4,224,4]);$k[$j++]=$a([96,96,4,4,272,4]);$k[$j++]=$a([104,104,4,4,336,6]);$k[$j++]=$a([120,120,6,6,408,6]);$k[$j++]=$a([132,132,6,6,496,8]);$k[$j++]=$a([144,144,6,6,620,10]);$k[$j++]=$a([8,18,1,1,7,1]);$k[$j++]=$a([8,32,1,2,11,1]);if($1.dindmre||$1.isodmre){$k[$j++]=$a([8,48,1,2,15,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([8,64,1,4,18,1]);}
if($1.isodmre){$k[$j++]=$a([8,80,1,4,22,1]);}
if($1.isodmre){$k[$j++]=$a([8,96,1,4,28,1]);}
if($1.isodmre){$k[$j++]=$a([8,120,1,6,32,1]);}
if($1.isodmre){$k[$j++]=$a([8,144,1,6,36,1]);}
$k[$j++]=$a([12,26,1,1,14,1]);$k[$j++]=$a([12,36,1,2,18,1]);if($1.dindmre||$1.isodmre){$k[$j++]=$a([12,64,1,4,27,1]);}
if($1.isodmre){$k[$j++]=$a([12,88,1,4,36,1]);}
$k[$j++]=$a([16,36,1,2,24,1]);$k[$j++]=$a([16,48,1,2,28,1]);if($1.dindmre||$1.isodmre){$k[$j++]=$a([16,64,1,4,36,1]);}
if($1.isodmre){$k[$j++]=$a([20,36,1,2,28,1]);}
if($1.isodmre){$k[$j++]=$a([20,44,1,2,34,1]);}
if($1.isodmre){$k[$j++]=$a([20,64,1,4,42,1]);}
if($1.isodmre){$k[$j++]=$a([22,48,1,2,38,1]);}
if($1.dindmre){$k[$j++]=$a([24,32,1,2,28,1]);}
if($1.dindmre){$k[$j++]=$a([24,36,1,2,33,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([24,48,1,2,41,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([24,64,1,4,46,1]);}
if($1.dindmre){$k[$j++]=$a([26,32,1,2,32,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([26,40,1,2,38,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([26,48,1,2,42,1]);}
if($1.dindmre||$1.isodmre){$k[$j++]=$a([26,64,1,4,50,1]);}
$1.metrics=$a();$1.urows=$1.rows;$1.ucols=$1.columns;$1.fullcws=$a([]);var _1Z=$1.metrics;for(var _1a=0,_1b=_1Z.length;_1a<_1b;_1a++){$1.m=$get(_1Z,_1a);$1.rows=$get($1.m,0);$1.cols=$get($1.m,1);$1.regh=$get($1.m,2);$1.regv=$get($1.m,3);$1.rscw=$get($1.m,4);$1.rsbl=$get($1.m,5);$1.mrows=$f($1.rows-(2*$1.regh));$1.mcols=$f($1.cols-(2*$1.regv));$1.ncws=$f((~~(($1.mrows*$1.mcols)/8))-$1.rscw);$1.okay=true;if(($1.urows!=0)&&($1.urows!=$1.rows)){$1.okay=false;}
if(($1.ucols!=0)&&($1.ucols!=$1.cols)){$1.okay=false;}
if($eq($1.format,"square")&&$ne($1.rows,$1.cols)){$1.okay=false;}
if($eq($1.format,"rectangle")&&$eq($1.rows,$1.cols)){$1.okay=false;}
if($1.okay){$k[$j++]=Infinity;$aload($1.fullcws);$k[$j++]=$1.ncws;$1.fullcws=$a();}}
$k[$j++]=Infinity;for(var _2C=0,_2D=1558;_2C<_2D;_2C++){$k[$j++]=10000;}
$1.numremcws=$a();var _2F=$1.fullcws;for(var _2G=0,_2H=_2F.length;_2G<_2H;_2G++){$put($1.numremcws,$f($get(_2F,_2G)-1),1);}
for(var _2K=1556;_2K>=0;_2K-=1){$1.i=_2K;if($get($1.numremcws,$1.i)!=1){$put($1.numremcws,$1.i,$f($get($1.numremcws,$1.i+1)+1));}}
if($1.raw){$1.encoding="raw";}
if($eq($1.encoding,"raw")){$1.cws=$a($1.barcode.length);$1.i=0;$1.j=0;for(;;){if($1.i==$1.barcode.length){break;}
$1.cw=~~$z($geti($1.barcode,$1.i+1,3));$put($1.cws,$1.j,$1.cw);$1.i=$1.i+4;$1.j=$1.j+1;}
$1.cws=$geti($1.cws,0,$1.j);}
if($eq($1.encoding,"auto")){$1.fnc1=-1;$1.prog=-2;$1.m05=-3;$1.m06=-4;$1.lC=-5;$1.lB=-6;$1.lX=-7;$1.lT=-8;$1.lE=-9;$1.unl=-10;$1.sapp=-11;$1.usft=-12;$1.sft1=-13;$1.sft2=-14;$1.sft3=-15;$1.eci=-16;$1.pad=-17;$1.unlcw=254;var _2p=new Map([["parse",$1.parse],["parsefnc",$1.parsefnc],["eci",true],["FNC1",$1.fnc1],["PROG",$1.prog]]);$1.fncvals=_2p;$k[$j++]='msg';$k[$j++]=$1.barcode;$k[$j++]=$1.fncvals;bwipp_parseinput();var _2s=$k[--$j];$1[$k[--$j]]=_2s;$1.msglen=$1.msg.length;if($1.msglen>=9){$aload($geti($1.msg,0,7));var _2y=$k[--$j];var _2z=$k[--$j];$k[$j++]=_2y==29;$k[$j++]=_2z;$j--;var _30=$k[--$j];var _31=$k[--$j];var _32=$k[--$j];var _33=$k[--$j];var _34=$k[--$j];var _35=$k[--$j];if(((((_30&&(_31==48))&&(_32==30))&&(_33==62))&&(_34==41))&&(_35==91)){$aload($geti($1.msg,$1.msglen-2,2));var _39=$k[--$j];var _3A=$k[--$j];if((_39==4)&&(_3A==30)){if($get($1.msg,5)==53){$k[$j++]=Infinity;$k[$j++]=$1.m05;$aload($geti($1.msg,7,$1.msg.length-9));$1.msg=$a();}
if($get($1.msg,5)==54){$k[$j++]=Infinity;$k[$j++]=$1.m06;$aload($geti($1.msg,7,$1.msg.length-9));$1.msg=$a();}}}}
$1.msglen=$1.msg.length;$k[$j++]=Infinity;for(var _3Q=0;_3Q<=128;_3Q+=1){$k[$j++]=_3Q;$k[$j++]=_3Q+1;}
$k[$j++]=$1.pad;$k[$j++]=129;for(var _3S=0;_3S<=99;_3S+=1){var _3U=$cvrs($s(2),_3S,10);var _3W=$strcpy($s(2),"00");$puti(_3W,2-_3U.length,_3U);$k[$j++]=_3W;$k[$j++]=_3S+130;}
var _3j=$a([$1.lC,$1.lB,$1.fnc1,$1.sapp,$1.prog,$1.usft,$1.m05,$1.m06,$1.lX,$1.lT,$1.lE,$1.eci]);$k[$j++]=229;for(var _3k=0,_3l=_3j.length;_3k<_3l;_3k++){var _3o=$f($k[--$j]+1);$k[$j++]=$get(_3j,_3k);$k[$j++]=_3o;$k[$j++]=_3o;}
$j--;$1.Avals=$d();$k[$j++]=Infinity;var _3q=$1.Avals;for(var _3v=_3q.size,_3u=_3q.keys(),_3t=0;_3t<_3v;_3t++){var _3r=_3u.next().value;$k[$j++]=_3r;$k[$j++]=_3q.get(_3r);$k[$j++]=Infinity;var _3w=$k[--$j];var _3x=$k[--$j];$k[$j++]=_3w;$k[$j++]=_3x;var _3y=$a();$k[$j++]=_3y;}
$1.Avals=$d();$k[$j++]=Infinity;$k[$j++]=$1.sft1;$k[$j++]=0;$k[$j++]=$1.sft2;$k[$j++]=1;$k[$j++]=$1.sft3;$k[$j++]=2;$k[$j++]=32;$k[$j++]=3;for(var _43=48;_43<=57;_43+=1){$k[$j++]=_43;$k[$j++]=_43-44;}
for(var _44=65;_44<=90;_44+=1){$k[$j++]=_44;$k[$j++]=_44-51;}
$1.CNvals=$d();$k[$j++]=Infinity;for(var _46=0;_46<=31;_46+=1){$k[$j++]=_46;$k[$j++]=_46;}
$1.C1vals=$d();$k[$j++]=Infinity;for(var _48=33;_48<=47;_48+=1){$k[$j++]=_48;$k[$j++]=_48-33;}
for(var _49=58;_49<=64;_49+=1){$k[$j++]=_49;$k[$j++]=_49-43;}
for(var _4A=91;_4A<=95;_4A+=1){$k[$j++]=_4A;$k[$j++]=_4A-69;}
$k[$j++]=$1.fnc1;$k[$j++]=27;$k[$j++]=$1.usft;$k[$j++]=30;$1.C2vals=$d();$k[$j++]=Infinity;for(var _4E=96;_4E<=127;_4E+=1){$k[$j++]=_4E;$k[$j++]=_4E-96;}
$1.C3vals=$d();$k[$j++]=Infinity;var _4G=$1.CNvals;for(var _4L=_4G.size,_4K=_4G.keys(),_4J=0;_4J<_4L;_4J++){var _4H=_4K.next().value;$k[$j++]=_4H;$k[$j++]=_4G.get(_4H);$k[$j++]=Infinity;var _4M=$k[--$j];var _4N=$k[--$j];$k[$j++]=_4M;$k[$j++]=_4N;var _4O=$a();$k[$j++]=_4O;}
var _4P=$1.C1vals;for(var _4U=_4P.size,_4T=_4P.keys(),_4S=0;_4S<_4U;_4S++){var _4Q=_4T.next().value;$k[$j++]=_4Q;$k[$j++]=_4P.get(_4Q);$k[$j++]=Infinity;var _4V=$k[--$j];var _4W=$k[--$j];$k[$j++]=_4V;$k[$j++]=$get($1.CNvals,$1.sft1);$k[$j++]=_4W;var _4a=$a();$k[$j++]=_4a;}
var _4b=$1.C2vals;for(var _4g=_4b.size,_4f=_4b.keys(),_4e=0;_4e<_4g;_4e++){var _4c=_4f.next().value;$k[$j++]=_4c;$k[$j++]=_4b.get(_4c);$k[$j++]=Infinity;var _4h=$k[--$j];var _4i=$k[--$j];$k[$j++]=_4h;$k[$j++]=$get($1.CNvals,$1.sft2);$k[$j++]=_4i;var _4m=$a();$k[$j++]=_4m;}
var _4n=$1.C3vals;for(var _4s=_4n.size,_4r=_4n.keys(),_4q=0;_4q<_4s;_4q++){var _4o=_4r.next().value;$k[$j++]=_4o;$k[$j++]=_4n.get(_4o);$k[$j++]=Infinity;var _4t=$k[--$j];var _4u=$k[--$j];$k[$j++]=_4t;$k[$j++]=$get($1.CNvals,$1.sft3);$k[$j++]=_4u;var _4y=$a();$k[$j++]=_4y;}
$1.Cvals=$d();$k[$j++]=Infinity;$k[$j++]=$1.sft1;$k[$j++]=0;$k[$j++]=$1.sft2;$k[$j++]=1;$k[$j++]=$1.sft3;$k[$j++]=2;$k[$j++]=32;$k[$j++]=3;for(var _53=48;_53<=57;_53+=1){$k[$j++]=_53;$k[$j++]=_53-44;}
for(var _54=97;_54<=122;_54+=1){$k[$j++]=_54;$k[$j++]=_54-83;}
$1.TNvals=$d();$k[$j++]=Infinity;for(var _56=0;_56<=31;_56+=1){$k[$j++]=_56;$k[$j++]=_56;}
$1.T1vals=$d();$k[$j++]=Infinity;for(var _58=33;_58<=47;_58+=1){$k[$j++]=_58;$k[$j++]=_58-33;}
for(var _59=58;_59<=64;_59+=1){$k[$j++]=_59;$k[$j++]=_59-43;}
for(var _5A=91;_5A<=95;_5A+=1){$k[$j++]=_5A;$k[$j++]=_5A-69;}
$k[$j++]=$1.fnc1;$k[$j++]=27;$k[$j++]=$1.usft;$k[$j++]=30;$1.T2vals=$d();$k[$j++]=Infinity;$k[$j++]=96;$k[$j++]=0;for(var _5E=65;_5E<=90;_5E+=1){$k[$j++]=_5E;$k[$j++]=_5E-64;}
for(var _5F=123;_5F<=127;_5F+=1){$k[$j++]=_5F;$k[$j++]=_5F-96;}
$1.T3vals=$d();$k[$j++]=Infinity;var _5H=$1.TNvals;for(var _5M=_5H.size,_5L=_5H.keys(),_5K=0;_5K<_5M;_5K++){var _5I=_5L.next().value;$k[$j++]=_5I;$k[$j++]=_5H.get(_5I);$k[$j++]=Infinity;var _5N=$k[--$j];var _5O=$k[--$j];$k[$j++]=_5N;$k[$j++]=_5O;var _5P=$a();$k[$j++]=_5P;}
var _5Q=$1.T1vals;for(var _5V=_5Q.size,_5U=_5Q.keys(),_5T=0;_5T<_5V;_5T++){var _5R=_5U.next().value;$k[$j++]=_5R;$k[$j++]=_5Q.get(_5R);$k[$j++]=Infinity;var _5W=$k[--$j];var _5X=$k[--$j];$k[$j++]=_5W;$k[$j++]=$get($1.TNvals,$1.sft1);$k[$j++]=_5X;var _5b=$a();$k[$j++]=_5b;}
var _5c=$1.T2vals;for(var _5h=_5c.size,_5g=_5c.keys(),_5f=0;_5f<_5h;_5f++){var _5d=_5g.next().value;$k[$j++]=_5d;$k[$j++]=_5c.get(_5d);$k[$j++]=Infinity;var _5i=$k[--$j];var _5j=$k[--$j];$k[$j++]=_5i;$k[$j++]=$get($1.TNvals,$1.sft2);$k[$j++]=_5j;var _5n=$a();$k[$j++]=_5n;}
var _5o=$1.T3vals;for(var _5t=_5o.size,_5s=_5o.keys(),_5r=0;_5r<_5t;_5r++){var _5p=_5s.next().value;$k[$j++]=_5p;$k[$j++]=_5o.get(_5p);$k[$j++]=Infinity;var _5u=$k[--$j];var _5v=$k[--$j];$k[$j++]=_5u;$k[$j++]=$get($1.TNvals,$1.sft3);$k[$j++]=_5v;var _5z=$a();$k[$j++]=_5z;}
$1.Tvals=$d();for(var _61=128;_61<=255;_61+=1){$1.i=_61;$k[$j++]=$1.Avals;$k[$j++]=$1.i;$k[$j++]=Infinity;$aload($get($1.Avals,$1.usft));$aload($get($1.Avals,$1.i-128));var _6A=$a();var _6B=$k[--$j];$put($k[--$j],_6B,_6A);$k[$j++]=$1.Cvals;$k[$j++]=$1.i;$k[$j++]=Infinity;$aload($get($1.Cvals,$1.usft));$aload($get($1.Cvals,$1.i-128));var _6L=$a();var _6M=$k[--$j];$put($k[--$j],_6M,_6L);$k[$j++]=$1.Tvals;$k[$j++]=$1.i;$k[$j++]=Infinity;$aload($get($1.Tvals,$1.usft));$aload($get($1.Tvals,$1.i-128));var _6W=$a();var _6X=$k[--$j];$put($k[--$j],_6X,_6W);}
$k[$j++]=Infinity;$k[$j++]=13;$k[$j++]=0;$k[$j++]=42;$k[$j++]=1;$k[$j++]=62;$k[$j++]=2;$k[$j++]=32;$k[$j++]=3;for(var _6Z=48;_6Z<=57;_6Z+=1){$k[$j++]=_6Z;$k[$j++]=_6Z-44;}
for(var _6a=65;_6a<=90;_6a+=1){$k[$j++]=_6a;$k[$j++]=_6a-51;}
$1.Xvals=$d();$k[$j++]=Infinity;var _6c=$1.Xvals;for(var _6h=_6c.size,_6g=_6c.keys(),_6f=0;_6f<_6h;_6f++){var _6d=_6g.next().value;$k[$j++]=_6d;$k[$j++]=_6c.get(_6d);$k[$j++]=Infinity;var _6i=$k[--$j];var _6j=$k[--$j];$k[$j++]=_6i;$k[$j++]=_6j;var _6k=$a();$k[$j++]=_6k;}
$1.Xvals=$d();$k[$j++]=Infinity;for(var _6m=64;_6m<=94;_6m+=1){$k[$j++]=_6m;$k[$j++]=_6m-64;}
$k[$j++]=$1.unl;$k[$j++]=31;for(var _6o=32;_6o<=63;_6o+=1){$k[$j++]=_6o;$k[$j++]=_6o;}
$1.Evals=$d();$k[$j++]=Infinity;var _6q=$1.Evals;for(var _6v=_6q.size,_6u=_6q.keys(),_6t=0;_6t<_6v;_6t++){var _6r=_6u.next().value;$k[$j++]=_6r;$k[$j++]=_6q.get(_6r);$k[$j++]=Infinity;var _6w=$k[--$j];var _6x=$k[--$j];$k[$j++]=_6w;$k[$j++]=_6x;var _6y=$a();$k[$j++]=_6y;}
$1.Evals=$d();$k[$j++]=Infinity;for(var _70=0;_70<=255;_70+=1){$k[$j++]=_70;$k[$j++]=_70;}
$1.Bvals=$d();$k[$j++]=Infinity;var _72=$1.Bvals;for(var _77=_72.size,_76=_72.keys(),_75=0;_75<_77;_75++){var _73=_76.next().value;$k[$j++]=_73;$k[$j++]=_72.get(_73);$k[$j++]=Infinity;var _78=$k[--$j];var _79=$k[--$j];$k[$j++]=_78;$k[$j++]=_79;var _7A=$a();$k[$j++]=_7A;}
$1.Bvals=$d();$1.encvals=$a([$1.Avals,$1.Cvals,$1.Tvals,$1.Xvals,$1.Evals,$1.Bvals]);$k[$j++]=Infinity;for(var _7K=0,_7L=$1.msglen;_7K<_7L;_7K++){$k[$j++]=0;}
$k[$j++]=0;$1.numD=$a();$k[$j++]=Infinity;for(var _7O=0,_7P=$1.msglen;_7O<_7P;_7O++){$k[$j++]=0;}
$k[$j++]=9999;$1.nextXterm=$a();$k[$j++]=Infinity;for(var _7S=0,_7T=$1.msglen;_7S<_7T;_7S++){$k[$j++]=0;}
$k[$j++]=9999;$1.nextNonX=$a();$k[$j++]=Infinity;for(var _7W=0,_7X=$1.msglen;_7W<_7X;_7W++){$k[$j++]=false;}
$k[$j++]=false;$1.isECI=$a();for(var _7a=$1.msglen-1;_7a>=0;_7a-=1){$1.i=_7a;$1.barchar=$get($1.msg,$1.i);if(($1.barchar>=48)&&($1.barchar<=57)){$put($1.numD,$1.i,$f($get($1.numD,$1.i+1)+1));}
if((($1.barchar==13)||($1.barchar==42))||($1.barchar==62)){$put($1.nextXterm,$1.i,0);}else{$put($1.nextXterm,$1.i,$f($get($1.nextXterm,$1.i+1)+1));}
var _7x=$get($1.Xvals,$1.barchar)!==undefined;if(!_7x){$put($1.nextNonX,$1.i,0);}else{$put($1.nextNonX,$1.i,$f($get($1.nextNonX,$1.i+1)+1));}
$put($1.isECI,$1.i,$1.barchar<=-1000000);}
$k[$j++]=Infinity;var _88=$1.nextXterm;for(var _89=0,_8A=_88.length;_89<_8A;_89++){var _8B=$get(_88,_89);$k[$j++]=_8B;if(_8B>10000){$j--;$k[$j++]=10000;}}
$1.nextXterm=$a();$k[$j++]=Infinity;var _8D=$1.nextNonX;for(var _8E=0,_8F=_8D.length;_8E<_8F;_8E++){var _8G=$get(_8D,_8E);$k[$j++]=_8G;if(_8G>10000){$j--;$k[$j++]=10000;}}
$1.nextNonX=$a();$1.isD=function(){$k[$j++]=($1.char>=48)&&($1.char<=57);};$1.isC=function(){var _8M=$get($1.CNvals,$1.char)!==undefined;$k[$j++]=_8M;};$1.isT=function(){var _8P=$get($1.TNvals,$1.char)!==undefined;$k[$j++]=_8P;};$1.isX=function(){var _8S=$get($1.Xvals,$1.char)!==undefined;$k[$j++]=_8S;};$1.isE=function(){var _8V=$get($1.Evals,$1.char)!==undefined;$k[$j++]=_8V;};$1.isEA=function(){$k[$j++]=$1.char>127;};$1.isFN=function(){$k[$j++]=$1.char<0;};$1.XtermFirst=function(){var _8Y=$k[--$j];$k[$j++]=$lt($get($1.nextXterm,_8Y),$get($1.nextNonX,_8Y));};$1.A=0;$1.C=1;$1.T=2;$1.X=3;$1.E=4;$1.B=5;$1.lookup=function(){$1.ac=1;$1.cc=2;$1.tc=2;$1.xc=2;$1.ec=2;$1.bc=2.25;if($1.mode==$1.A){$1.ac=0;$1.cc=1;$1.tc=1;$1.xc=1;$1.ec=1;$1.bc=1.25;}
if($1.mode==$1.C){$1.cc=0;}
if($1.mode==$1.T){$1.tc=0;}
if($1.mode==$1.X){$1.xc=0;}
if($1.mode==$1.E){$1.ec=0;}
if($1.mode==$1.B){$1.bc=0;}
for(var _8p=0,_8q=1;_8p<_8q;_8p++){if($get($1.isECI,$1.i)){$k[$j++]=$1.A;break;}
if($1.mailmark&&($1.i<45)){$k[$j++]=$1.C;break;}
$1.k=0;for(;;){if(($1.i+$1.k)==$1.msglen){var _91=$a(['ac','cc','tc','xc','ec','bc']);for(var _92=0,_93=_91.length;_92<_93;_92++){var _94=$get(_91,_92);$1[_94]=Math.ceil($1[_94]);}
var _9B=$a([$1.cc,$1.tc,$1.xc,$1.ec,$1.bc]);$k[$j++]=true;for(var _9C=0,_9D=_9B.length;_9C<_9D;_9C++){var _9G=$k[--$j];$k[$j++]=_9G&&($1.ac<=$get(_9B,_9C));}
if($k[--$j]){$k[$j++]=$1.A;break;}
var _9O=$a([$1.ac,$1.cc,$1.tc,$1.xc,$1.ec]);$k[$j++]=true;for(var _9P=0,_9Q=_9O.length;_9P<_9Q;_9P++){var _9T=$k[--$j];$k[$j++]=_9T&&($1.bc<$get(_9O,_9P));}
if($k[--$j]){$k[$j++]=$1.B;break;}
var _9b=$a([$1.ac,$1.cc,$1.tc,$1.xc,$1.bc]);$k[$j++]=true;for(var _9c=0,_9d=_9b.length;_9c<_9d;_9c++){var _9g=$k[--$j];$k[$j++]=_9g&&($1.ec<$get(_9b,_9c));}
if($k[--$j]){$k[$j++]=$1.E;break;}
var _9o=$a([$1.ac,$1.cc,$1.xc,$1.ec,$1.bc]);$k[$j++]=true;for(var _9p=0,_9q=_9o.length;_9p<_9q;_9p++){var _9t=$k[--$j];$k[$j++]=_9t&&($1.tc<$get(_9o,_9p));}
if($k[--$j]){$k[$j++]=$1.T;break;}
var _A1=$a([$1.ac,$1.cc,$1.tc,$1.ec,$1.bc]);$k[$j++]=true;for(var _A2=0,_A3=_A1.length;_A2<_A3;_A2++){var _A6=$k[--$j];$k[$j++]=_A6&&($1.xc<$get(_A1,_A2));}
if($k[--$j]){$k[$j++]=$1.X;break;}
$k[$j++]=$1.C;break;}
$1.char=$get($1.msg,$1.i+$1.k);$k[$j++]='ac';$k[$j++]=$1.ac;$1.isD();if($k[--$j]){var _AG=$k[--$j];$k[$j++]=$f(_AG+(1/2));}else{$1.isEA();if($k[--$j]){var _AI=$k[--$j];$k[$j++]=Math.ceil(_AI)+2;}else{var _AJ=$k[--$j];$k[$j++]=Math.ceil(_AJ)+1;}}
var _AK=$k[--$j];$1[$k[--$j]]=_AK;$k[$j++]='cc';$k[$j++]=$1.cc;$1.isC();if($k[--$j]){var _AO=$k[--$j];$k[$j++]=$f(_AO+0.66666667);}else{$1.isEA();if($k[--$j]){var _AQ=$k[--$j];$k[$j++]=$f(_AQ+2.66666667);}else{var _AR=$k[--$j];$k[$j++]=$f(_AR+1.33333334);}}
var _AS=$k[--$j];$1[$k[--$j]]=_AS;$k[$j++]='tc';$k[$j++]=$1.tc;$1.isT();if($k[--$j]){var _AW=$k[--$j];$k[$j++]=$f(_AW+0.66666667);}else{$1.isEA();if($k[--$j]){var _AY=$k[--$j];$k[$j++]=$f(_AY+2.66666667);}else{var _AZ=$k[--$j];$k[$j++]=$f(_AZ+1.33333334);}}
var _Aa=$k[--$j];$1[$k[--$j]]=_Aa;$k[$j++]='xc';$k[$j++]=$1.xc;$1.isX();if($k[--$j]){var _Ae=$k[--$j];$k[$j++]=$f(_Ae+0.66666667);}else{$1.isEA();if($k[--$j]){var _Ag=$k[--$j];$k[$j++]=$f(_Ag+4.33333334);}else{var _Ah=$k[--$j];$k[$j++]=$f(_Ah+3.33333334);}}
var _Ai=$k[--$j];$1[$k[--$j]]=_Ai;$k[$j++]='ec';$k[$j++]=$1.ec;$1.isE();if($k[--$j]){var _Am=$k[--$j];$k[$j++]=$f(_Am+(3/4));}else{$1.isEA();if($k[--$j]){var _Ao=$k[--$j];$k[$j++]=$f(_Ao+(17/4));}else{var _Ap=$k[--$j];$k[$j++]=$f(_Ap+(13/4));}}
var _Aq=$k[--$j];$1[$k[--$j]]=_Aq;$k[$j++]='bc';$k[$j++]=$1.bc;$1.isFN();if($k[--$j]){var _Au=$k[--$j];$k[$j++]=$f(_Au+4);}else{var _Av=$k[--$j];$k[$j++]=$f(_Av+1);}
var _Aw=$k[--$j];$1[$k[--$j]]=_Aw;if($1.k>=4){var _B4=$a([$1.cc,$1.tc,$1.xc,$1.ec,$1.bc]);$k[$j++]=true;for(var _B5=0,_B6=_B4.length;_B5<_B6;_B5++){var _B9=$k[--$j];$k[$j++]=_B9&&(($1.ac+1)<=$get(_B4,_B5));}
if($k[--$j]){$k[$j++]=$1.A;break;}
if(($1.bc+1)<=$1.ac){$k[$j++]=$1.B;break;}
var _BJ=$a([$1.cc,$1.tc,$1.xc,$1.ec]);$k[$j++]=true;for(var _BK=0,_BL=_BJ.length;_BK<_BL;_BK++){var _BO=$k[--$j];$k[$j++]=_BO&&(($1.bc+1)<$get(_BJ,_BK));}
if($k[--$j]){$k[$j++]=$1.B;break;}
var _BW=$a([$1.ac,$1.cc,$1.tc,$1.xc,$1.bc]);$k[$j++]=true;for(var _BX=0,_BY=_BW.length;_BX<_BY;_BX++){var _Bb=$k[--$j];$k[$j++]=_Bb&&(($1.ec+1)<$get(_BW,_BX));}
if($k[--$j]){$k[$j++]=$1.E;break;}
var _Bj=$a([$1.ac,$1.cc,$1.xc,$1.ec,$1.bc]);$k[$j++]=true;for(var _Bk=0,_Bl=_Bj.length;_Bk<_Bl;_Bk++){var _Bo=$k[--$j];$k[$j++]=_Bo&&(($1.tc+1)<$get(_Bj,_Bk));}
if($k[--$j]){$k[$j++]=$1.T;break;}
var _Bw=$a([$1.ac,$1.cc,$1.tc,$1.ec,$1.bc]);$k[$j++]=true;for(var _Bx=0,_By=_Bw.length;_Bx<_By;_Bx++){var _C1=$k[--$j];$k[$j++]=_C1&&(($1.xc+1)<$get(_Bw,_Bx));}
if($k[--$j]){$k[$j++]=$1.X;break;}
var _C8=$a([$1.ac,$1.tc,$1.ec,$1.bc]);$k[$j++]=true;for(var _C9=0,_CA=_C8.length;_C9<_CA;_C9++){var _CD=$k[--$j];$k[$j++]=_CD&&(($1.cc+1)<$get(_C8,_C9));}
if($k[--$j]){if($1.cc<$1.xc){$k[$j++]=$1.C;break;}
if($1.cc==$1.xc){$k[$j++]=($1.i+$1.k)+1;$1.XtermFirst();if($k[--$j]){$k[$j++]=$1.X;break;}else{$k[$j++]=$1.C;break;}}}}
$1.k=$1.k+1;}}};$1.addtocws=function(){var _CQ=$k[--$j];$puti($1.cws,$1.j,_CQ);$1.j=_CQ.length+$1.j;};$1.ECItocws=function(){var _CV=$f((-$k[--$j])-1000000);$k[$j++]=_CV;if(_CV<=126){var _CW=$k[--$j];$k[$j++]=$f(_CW+1);$astore($a(1));}else{var _CY=$k[--$j];$k[$j++]=_CY;if(_CY<=16382){var _Ca=$f($k[--$j]-127);$k[$j++]=(~~(_Ca/254))+128;$k[$j++]=$f((_Ca%254)+1);$astore($a(2));}else{var _Cd=$f($k[--$j]-16383);$k[$j++]=(~~(_Cd/64516))+192;$k[$j++]=((~~(_Cd/254))%254)+1;$k[$j++]=$f((_Cd%254)+1);$astore($a(3));}}};$1.encA=function(){for(var _Cf=0,_Cg=1;_Cf<_Cg;_Cf++){if($get($1.isECI,$1.i)){$k[$j++]=$get($1.Avals,$1.eci);$1.addtocws();$k[$j++]=$get($1.msg,$1.i);$1.ECItocws();$1.addtocws();$1.i=$1.i+1;break;}
if($get($1.numD,$1.i)>=2){var _Cu=$s(2);$put(_Cu,0,$get($1.msg,$1.i));$put(_Cu,1,$get($1.msg,$1.i+1));$k[$j++]=$get($1.Avals,_Cu);$1.addtocws();$1.i=$1.i+2;break;}
$k[$j++]='newmode';$1.lookup();var _D4=$k[--$j];$1[$k[--$j]]=_D4;if($1.newmode!=$1.mode){$k[$j++]=$get($1.Avals,$get($a([-1,$1.lC,$1.lT,$1.lX,$1.lE,$1.lB]),$1.newmode));$1.addtocws();$1.mode=$1.newmode;break;}
$k[$j++]=$get($1.Avals,$get($1.msg,$1.i));$1.addtocws();$1.i=$1.i+1;break;}};$1.CTXvalstocws=function(){$1.in=$k[--$j];$k[$j++]=Infinity;for(var _DS=0,_DR=$1.in.length-1;_DS<=_DR;_DS+=3){var _DU=$geti($1.in,_DS,3);$k[$j++]=0;for(var _DV=0,_DW=_DU.length;_DV<_DW;_DV++){var _DY=$k[--$j];$k[$j++]=$f(_DY+$get(_DU,_DV))*40;}
var _Da=(~~($k[--$j]/40))+1;$k[$j++]=~~(_Da/256);$k[$j++]=_Da%256;}
$astore($a($counttomark()));var _Dd=$k[--$j];var _De=$k[--$j];$k[$j++]=_Dd;$k[$j++]=_De;$j--;};$1.encCTX=function(){$1.p=0;$1.ctxvals=$a(2500);$1.done=false;for(;;){if($1.i==$1.msglen){break;}
var _Do=$get($get($1.encvals,$1.mode),$get($1.msg,$1.i))!==undefined;if(!_Do){break;}
if(($1.p%3)==0){$k[$j++]='newmode';$1.lookup();var _Dq=$k[--$j];$1[$k[--$j]]=_Dq;if($ne($1.newmode,$1.mode)){$k[$j++]=$geti($1.ctxvals,0,$1.p);$1.CTXvalstocws();$1.addtocws();$k[$j++]=$a([$1.unlcw]);$1.addtocws();if($1.newmode!=$1.A){$k[$j++]=$get($1.Avals,$get($a([-1,$1.lC,$1.lT,$1.lX,$1.lE,$1.lB]),$1.newmode));$1.addtocws();}
$1.mode=$1.newmode;$1.done=true;break;}
if(($1.msglen-$1.i)<=3){$1.remcws=$get($1.numremcws,$1.j+((~~($1.p/3))*2));$k[$j++]=Infinity;var _EM=$geti($1.msg,$1.i,$1.msglen-$1.i);for(var _EN=0,_EO=_EM.length;_EN<_EO;_EN++){var _EP=$get(_EM,_EN);var _ET=$get($get($1.encvals,$1.mode),_EP)!==undefined;$k[$j++]=_EP;if(_ET){$aload($get($get($1.encvals,$1.mode),$k[--$j]));}else{$j--;$k[$j++]=-1;$k[$j++]=-1;$k[$j++]=-1;$k[$j++]=-1;}}
$1.remvals=$a();if(($1.remcws==2)&&($1.remvals.length==3)){$k[$j++]=Infinity;$aload($geti($1.ctxvals,0,$1.p));$aload($1.remvals);var _Eg=$a();$k[$j++]=_Eg;$1.CTXvalstocws();$1.addtocws();$1.mode=$1.A;$1.i=$1.msglen;$1.done=true;break;}
if((($1.remcws==2)&&($1.remvals.length==2))&&($1.mode!=$1.X)){$k[$j++]=Infinity;$aload($geti($1.ctxvals,0,$1.p));$aload($1.remvals);$aload($get($get($1.encvals,$1.mode),$1.sft1));var _Ew=$a();$k[$j++]=_Ew;$1.CTXvalstocws();$1.addtocws();$1.mode=$1.A;$1.i=$1.msglen;$1.done=true;break;}
if(($1.remcws==2)&&($1.remvals.length==1)){$k[$j++]=$geti($1.ctxvals,0,$1.p);$1.CTXvalstocws();$1.addtocws();$k[$j++]=$a([$1.unlcw]);$1.addtocws();$k[$j++]=$get($1.Avals,$get($1.msg,$1.i));$1.addtocws();$1.mode=$1.A;$1.i=$1.msglen;$1.done=true;break;}
if(($1.remcws==1)&&($1.remvals.length==1)){$k[$j++]=$geti($1.ctxvals,0,$1.p);$1.CTXvalstocws();$1.addtocws();$k[$j++]=$get($1.Avals,$get($1.msg,$1.i));$1.addtocws();$1.mode=$1.A;$1.i=$1.msglen;$1.done=true;break;}}}
var _FV=$get($get($1.encvals,$1.mode),$get($1.msg,$1.i));$puti($1.ctxvals,$1.p,_FV);$1.p=_FV.length+$1.p;$1.i=$1.i+1;}
if(!$1.done){for(;;){if(($1.p%3)==0){break;}
$1.i=$1.i-1;$1.p=$1.p-$get($get($1.encvals,$1.mode),$get($1.msg,$1.i)).length;}
$k[$j++]=Infinity;$aload($geti($1.ctxvals,0,$1.p));var _Fo=$a();$k[$j++]=_Fo;$1.CTXvalstocws();$1.addtocws();$k[$j++]=$a([$1.unlcw]);$1.addtocws();$1.mode=$1.A;if(($1.i!=$1.msglen)&&$nt($get($1.isECI,$1.i))){if($get($1.numD,$1.i)>=2){var _G0=$s(2);$put(_G0,0,$get($1.msg,$1.i));$put(_G0,1,$get($1.msg,$1.i+1));$k[$j++]=$get($1.Avals,_G0);$1.addtocws();$1.i=$1.i+2;}else{$k[$j++]=$get($1.Avals,$get($1.msg,$1.i));$1.addtocws();$1.i=$1.i+1;}}}};$1.Evalstocws=function(){$1.in=$k[--$j];$1.inlen=$1.in.length;$1.outlen=~~(Math.ceil(($1.in.length/4)*3));$k[$j++]=Infinity;$aload($1.in);$k[$j++]=0;$k[$j++]=0;$k[$j++]=0;$1.in=$a();$k[$j++]=Infinity;for(var _GN=0,_GM=$1.inlen-1;_GN<=_GM;_GN+=4){var _GP=$geti($1.in,_GN,4);$k[$j++]=0;for(var _GQ=0,_GR=_GP.length;_GQ<_GR;_GQ++){var _GT=$k[--$j];$k[$j++]=$or(_GT,$get(_GP,_GQ))<<6;}
var _GV=$k[--$j]>>>6;$k[$j++]=(_GV>>>16)&255;$k[$j++]=(_GV>>>8)&255;$k[$j++]=_GV&255;}
$astore($a($counttomark()));var _GY=$k[--$j];var _GZ=$k[--$j];$k[$j++]=_GY;$k[$j++]=_GZ;$j--;var _Gc=$geti($k[--$j],0,$1.outlen);$k[$j++]=_Gc;};$1.encE=function(){$1.p=0;$1.edifactvals=$a(2100);for(;;){if($1.i==$1.msglen){break;}
var _Gk=$get($1.Evals,$get($1.msg,$1.i))!==undefined;if(!_Gk){break;}
if(($1.p%4)==0){if(($1.msglen-$1.i)<=2){$1.remcws=$get($1.numremcws,$1.j+((~~($1.p/4))*3));$k[$j++]=Infinity;var _Gw=$geti($1.msg,$1.i,$1.msglen-$1.i);for(var _Gx=0,_Gy=_Gw.length;_Gx<_Gy;_Gx++){$aload($get($1.Avals,$get(_Gw,_Gx)));}
$1.remvals=$a();if((($1.remcws==1)||($1.remcws==2))&&($1.remvals.length<=$1.remcws)){$k[$j++]=$geti($1.edifactvals,0,$1.p);$1.Evalstocws();$1.addtocws();$k[$j++]=$1.remvals;$1.addtocws();$1.mode=$1.A;$1.i=$1.msglen;break;}}
$1.lookup();if($k[--$j]!=$1.mode){break;}}
var _HJ=$get($1.Evals,$get($1.msg,$1.i));$puti($1.edifactvals,$1.p,_HJ);$1.p=_HJ.length+$1.p;$1.i=$1.i+1;}
if($1.mode!=$1.A){$1.remcws=$f($get($1.numremcws,($1.j+((~~($1.p/4))*3))-1)-1);if(((($1.p%4)!=0)||($1.i!=$1.msglen))||($1.remcws>=3)){var _Ha=$get($1.Evals,$1.unl);$puti($1.edifactvals,$1.p,_Ha);$1.p=_Ha.length+$1.p;}
$k[$j++]=$geti($1.edifactvals,0,$1.p);$1.Evalstocws();$1.addtocws();$1.mode=$1.A;if(($1.i!=$1.msglen)&&$nt($get($1.isECI,$1.i))){if($get($1.numD,$1.i)>=2){var _Hq=$s(2);$put(_Hq,0,$get($1.msg,$1.i));$put(_Hq,1,$get($1.msg,$1.i+1));$k[$j++]=$get($1.Avals,_Hq);$1.addtocws();$1.i=$1.i+2;}else{$k[$j++]=$get($1.Avals,$get($1.msg,$1.i));$1.addtocws();$1.i=$1.i+1;}}}};$1.encB=function(){$1.p=0;$1.bvals=$a(1558);for(;;){if($1.i==$1.msglen){break;}
$1.lookup();if($k[--$j]!=$1.mode){break;}
$put($1.bvals,$1.p,$get($1.msg,$1.i));$1.p=$1.p+1;$1.i=$1.i+1;}
$1.remcws=$f($get($1.numremcws,$1.j+$1.p)-1);$k[$j++]=Infinity;if(($1.remcws==0)&&($1.i==$1.msglen)){$k[$j++]=0;}else{if($1.p<250){$k[$j++]=$1.p;}else{$k[$j++]=(~~($1.p/250))+249;$k[$j++]=$1.p%250;}}
$aload($geti($1.bvals,0,$1.p));$1.bvals=$a();for(var _IZ=0,_IY=$1.bvals.length-1;_IZ<=_IY;_IZ+=1){$1.p=_IZ;var _If=$f(((((($1.j+$1.p)+1)*149)%255)+1)+$get($1.bvals,$1.p));$k[$j++]=_If;if(_If>=256){var _Ig=$k[--$j];$k[$j++]=$f(_Ig-256);}
$put($1.bvals,$1.p,$k[--$j]);}
$k[$j++]=$1.bvals;$1.addtocws();$1.mode=$1.A;};$1.cws=$a(1558);$1.mode=$1.A;$1.i=0;$1.j=0;for(;;){if($1.i>=$1.msglen){break;}
if($1[$get($a(['encA','encCTX','encCTX','encCTX','encE','encB']),$1.mode)]()===true){break;}}
$1.cws=$geti($1.cws,0,$1.j);}
$1.datlen=$1.cws.length;$1.remcws=$f($get($1.numremcws,$1.j-1)-1);if($1.remcws>0){$k[$j++]=Infinity;$aload($1.cws);for(var _J4=0,_J5=$1.remcws;_J4<_J5;_J4++){$k[$j++]=129;}
$1.cws=$a();for(var _JB=$1.datlen+1,_JA=$f($f($1.datlen+$1.remcws)-1);_JB<=_JA;_JB+=1){$1.i=_JB;var _JD=(((($1.i+1)*149)%253)+1)+129;$k[$j++]=_JD;if(_JD>254){var _JE=$k[--$j];$k[$j++]=$f(_JE-254);}
$put($1.cws,$1.i,$k[--$j]);}}
$1.i=0;for(;;){$1.m=$get($1.metrics,$1.i);$1.rows=$get($1.m,0);$1.cols=$get($1.m,1);$1.regh=$get($1.m,2);$1.regv=$get($1.m,3);$1.rscw=$get($1.m,4);$1.rsbl=$get($1.m,5);$1.mrows=$f($1.rows-(2*$1.regh));$1.mcols=$f($1.cols-(2*$1.regv));$1.rrows=~~($1.mrows/$1.regh);$1.rcols=~~($1.mcols/$1.regv);$1.ncws=$f((~~(($1.mrows*$1.mcols)/8))-$1.rscw);$1.okay=true;if($1.cws.length!=$1.ncws){$1.okay=false;}
if(($1.urows!=0)&&($1.urows!=$1.rows)){$1.okay=false;}
if(($1.ucols!=0)&&($1.ucols!=$1.cols)){$1.okay=false;}
if($eq($1.format,"square")&&$ne($1.rows,$1.cols)){$1.okay=false;}
if($eq($1.format,"rectangle")&&$eq($1.rows,$1.cols)){$1.okay=false;}
if($1.okay){break;}
$1.i=$1.i+1;}
$1.cwbs=$a($1.rsbl);$1.ecbs=$a($1.rsbl);for(var _K4=0,_K3=$f($1.rsbl-1);_K4<=_K3;_K4+=1){$1.i=_K4;if($1.cws.length!=1558){$1.cwbsize=~~($1.cws.length/$1.rsbl);}else{if($1.i<=7){$1.cwbsize=156;}else{$1.cwbsize=155;}}
$1.cwb=$a($1.cwbsize);for(var _KD=0,_KC=$1.cwbsize-1;_KD<=_KC;_KD+=1){$1.j=_KD;$put($1.cwb,$1.j,$get($1.cws,$f(($1.j*$1.rsbl)+$1.i)));}
$put($1.cwbs,$1.i,$1.cwb);$k[$j++]=$1.ecbs;$k[$j++]=$1.i;$k[$j++]=Infinity;for(var _KS=0,_KT=~~($1.rscw/$1.rsbl);_KS<_KT;_KS++){$k[$j++]=0;}
var _KU=$a();var _KV=$k[--$j];$put($k[--$j],_KV,_KU);}
$k[$j++]=Infinity;$k[$j++]=1;for(var _KX=0,_KY=255;_KX<_KY;_KX++){var _KZ=$k[--$j];var _Ka=_KZ*2;$k[$j++]=_KZ;$k[$j++]=_Ka;if(_Ka>=256){var _Kb=$k[--$j];$k[$j++]=_Kb^301;}}
$1.rsalog=$a();$1.rslog=$a(256);for(var _Ke=1;_Ke<=255;_Ke+=1){$put($1.rslog,$get($1.rsalog,_Ke),_Ke);}
$1.rsprod=function(){var _Ki=$k[--$j];var _Kj=$k[--$j];$k[$j++]=_Kj;$k[$j++]=_Ki;if((_Ki!=0)&&(_Kj!=0)){var _Km=$get($1.rslog,$k[--$j]);var _Kr=$get($1.rsalog,$f(_Km+$get($1.rslog,$k[--$j]))%255);$k[$j++]=_Kr;}else{$j-=2;$k[$j++]=0;}};$k[$j++]=Infinity;$k[$j++]=1;for(var _Ku=0,_Kv=~~($1.rscw/$1.rsbl);_Ku<_Kv;_Ku++){$k[$j++]=0;}
$1.coeffs=$a();for(var _L0=1,_Kz=~~($1.rscw/$1.rsbl);_L0<=_Kz;_L0+=1){$1.i=_L0;$put($1.coeffs,$1.i,$get($1.coeffs,$1.i-1));for(var _L7=$1.i-1;_L7>=1;_L7-=1){$1.j=_L7;$k[$j++]=$1.coeffs;$k[$j++]=$1.j;$k[$j++]=$get($1.coeffs,$1.j-1);$k[$j++]=$get($1.coeffs,$1.j);$k[$j++]=$get($1.rsalog,$1.i);$1.rsprod();var _LJ=$k[--$j];var _LK=$k[--$j];var _LL=$k[--$j];$put($k[--$j],_LL,$xo(_LK,_LJ));}
$k[$j++]=$1.coeffs;$k[$j++]=0;$k[$j++]=$get($1.coeffs,0);$k[$j++]=$get($1.rsalog,$1.i);$1.rsprod();var _LT=$k[--$j];var _LU=$k[--$j];$put($k[--$j],_LU,_LT);}
$1.coeffs=$geti($1.coeffs,0,$1.coeffs.length-1);for(var _Lb=0,_La=$1.cwbs.length-1;_Lb<=_La;_Lb+=1){$1.i=_Lb;$1.cwb=$get($1.cwbs,$1.i);$1.ecb=$get($1.ecbs,$1.i);for(var _Lk=0,_Lj=$1.cwb.length-1;_Lk<=_Lj;_Lk+=1){$1.t=$xo($get($1.cwb,_Lk),$get($1.ecb,0));for(var _Lq=$1.ecb.length-1;_Lq>=0;_Lq-=1){$1.j=_Lq;$1.p=($1.ecb.length-$1.j)-1;$k[$j++]=$1.ecb;$k[$j++]=$1.p;$k[$j++]=$1.t;$k[$j++]=$get($1.coeffs,$1.j);$1.rsprod();var _Lz=$k[--$j];var _M0=$k[--$j];$put($k[--$j],_M0,_Lz);if($1.j>0){$put($1.ecb,$1.p,$xo($get($1.ecb,$1.p+1),$get($1.ecb,$1.p)));}}}}
if($1.ncws==1558){$k[$j++]=Infinity;var _MD=$geti($1.ecbs,8,2);for(var _ME=0,_MF=_MD.length;_ME<_MF;_ME++){$k[$j++]=$get(_MD,_ME);}
var _MI=$geti($1.ecbs,0,8);for(var _MJ=0,_MK=_MI.length;_MJ<_MK;_MJ++){$k[$j++]=$get(_MI,_MJ);}
$1.ecbs=$a();}
$k[$j++]=Infinity;var _MN=$1.cws;for(var _MO=0,_MP=_MN.length;_MO<_MP;_MO++){$k[$j++]=$get(_MN,_MO);}
for(var _MS=0,_MT=$1.rscw;_MS<_MT;_MS++){$k[$j++]=0;}
$1.cws=$a();for(var _MX=0,_MW=$f($1.rscw-1);_MX<=_MW;_MX+=1){$1.i=_MX;$put($1.cws,$f($1.ncws+$1.i),$get($get($1.ecbs,$1.i%$1.rsbl),~~($1.i/$1.rsbl)));}
$1.module=function(){var _Mi=$k[--$j];var _Mj=$k[--$j];var _Mk=$k[--$j];var _Mn=$strcpy($s(8),"00000000");var _Mp=$cvrs($s(8),$k[--$j],2);$puti(_Mn,8-_Mp.length,_Mp);$k[$j++]=_Mk;$k[$j++]=_Mj;$k[$j++]=_Mi;$k[$j++]=_Mn;for(var _Mq=7;_Mq>=0;_Mq-=1){var _Mr=$k[--$j];$k[$j++]=$f($get(_Mr,_Mq)-48);$k[$j++]=_Mr;}
$j--;var _Mt=$k[--$j];var _Mu=$k[--$j];var _Mv=$k[--$j];var _Mw=$k[--$j];var _Mx=$k[--$j];var _My=$k[--$j];var _Mz=$k[--$j];var _N0=$k[--$j];var _N1=$k[--$j];var _N2=$k[--$j];var _N3=$k[--$j];$k[$j++]=_N0;$k[$j++]=_Mz;$k[$j++]=_My;$k[$j++]=_Mx;$k[$j++]=_Mw;$k[$j++]=_Mv;$k[$j++]=_Mu;$k[$j++]=_Mt;$k[$j++]=_N3;$k[$j++]=_N2;$forall(_N1,function(){if($k[--$j]()===true){return true;}
var _N5=$k[--$j];var _N6=$k[--$j];$k[$j++]=_N6;$k[$j++]=_N5;if(_N6<0){var _N7=$k[--$j];var _N8=$k[--$j];$k[$j++]=$f(_N8+$1.mrows);$k[$j++]=$f(_N7+($f(4-($f($1.mrows+4)%8))));}
var _NB=$k[--$j];$k[$j++]=_NB;if(_NB<0){var _ND=$k[--$j];var _NE=$k[--$j];$k[$j++]=$f(_NE+($f(4-($f($1.mcols+4)%8))));$k[$j++]=$f(_ND+$1.mcols);}
var _NG=$k[--$j];var _NH=$k[--$j];$k[$j++]=_NH;$k[$j++]=_NG;if(_NH>=$1.mrows){var _NJ=$k[--$j];var _NK=$k[--$j];$k[$j++]=$f(_NK-$1.mrows);$k[$j++]=_NJ;}
var _NM=$k[--$j];var _NN=$k[--$j];var _NQ=$k[--$j];var _NR=$k[--$j];$put($1.mmat,$f(_NM+(_NN*$1.mcols)),$k[--$j]);$k[$j++]=_NR;$k[$j++]=_NQ;});};var _Nj=$a([function(){var _NT=$k[--$j];var _NU=$k[--$j];$k[$j++]=_NU;$k[$j++]=_NT;$k[$j++]=$f(_NU-2);$k[$j++]=$f(_NT-2);},function(){var _NV=$k[--$j];var _NW=$k[--$j];$k[$j++]=_NW;$k[$j++]=_NV;$k[$j++]=$f(_NW-2);$k[$j++]=$f(_NV-1);},function(){var _NX=$k[--$j];var _NY=$k[--$j];$k[$j++]=_NY;$k[$j++]=_NX;$k[$j++]=$f(_NY-1);$k[$j++]=$f(_NX-2);},function(){var _NZ=$k[--$j];var _Na=$k[--$j];$k[$j++]=_Na;$k[$j++]=_NZ;$k[$j++]=$f(_Na-1);$k[$j++]=$f(_NZ-1);},function(){var _Nb=$k[--$j];var _Nc=$k[--$j];$k[$j++]=_Nc;$k[$j++]=_Nb;$k[$j++]=$f(_Nc-1);$k[$j++]=_Nb;},function(){var _Nd=$k[--$j];var _Ne=$k[--$j];$k[$j++]=_Ne;$k[$j++]=_Nd;$k[$j++]=_Ne;$k[$j++]=$f(_Nd-2);},function(){var _Nf=$k[--$j];var _Ng=$k[--$j];$k[$j++]=_Ng;$k[$j++]=_Nf;$k[$j++]=_Ng;$k[$j++]=$f(_Nf-1);},function(){var _Nh=$k[--$j];var _Ni=$k[--$j];$k[$j++]=_Ni;$k[$j++]=_Nh;$k[$j++]=_Ni;$k[$j++]=_Nh;}]);$1.dmn=_Nj;var _Ns=$a([function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=1;},function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=2;},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-2);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=2;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=3;$k[$j++]=$f($1.mcols-1);}]);$1.dmc1=_Ns;var _O1=$a([function(){$k[$j++]=$f($1.mrows-3);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-2);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=0;},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-4);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-3);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-2);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-1);}]);$1.dmc2=_O1;var _OA=$a([function(){$k[$j++]=$f($1.mrows-3);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-2);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=0;},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-2);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=2;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=3;$k[$j++]=$f($1.mcols-1);}]);$1.dmc3=_OA;var _OK=$a([function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=0;},function(){$k[$j++]=$f($1.mrows-1);$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-3);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-2);},function(){$k[$j++]=0;$k[$j++]=$f($1.mcols-1);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-3);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-2);},function(){$k[$j++]=1;$k[$j++]=$f($1.mcols-1);}]);$1.dmc4=_OK;$k[$j++]=Infinity;for(var _ON=0,_OO=$1.mrows*$1.mcols;_ON<_OO;_ON++){$k[$j++]=-1;}
$1.mmat=$a();for(var _OR=$1.cws.length-1;_OR>=0;_OR-=1){$k[$j++]=$get($1.cws,_OR);}
$k[$j++]=4;$k[$j++]=0;for(;;){var _OU=$k[--$j];var _OV=$k[--$j];$k[$j++]=_OV;$k[$j++]=_OU;if((_OU==0)&&(_OV==$1.mrows)){$k[$j++]=$1.dmc1;$1.module();}
var _OY=$k[--$j];var _OZ=$k[--$j];$k[$j++]=_OZ;$k[$j++]=_OY;if(((_OY==0)&&(_OZ==$f($1.mrows-2)))&&(($1.mcols%4)!=0)){$k[$j++]=$1.dmc2;$1.module();}
var _Od=$k[--$j];var _Oe=$k[--$j];$k[$j++]=_Oe;$k[$j++]=_Od;if(((_Od==0)&&(_Oe==$f($1.mrows-2)))&&(($1.mcols%8)==4)){$k[$j++]=$1.dmc3;$1.module();}
var _Oi=$k[--$j];var _Oj=$k[--$j];$k[$j++]=_Oj;$k[$j++]=_Oi;if(((_Oi==2)&&(_Oj==$f($1.mrows+4)))&&(($1.mcols%8)==0)){$k[$j++]=$1.dmc4;$1.module();}
for(;;){var _On=$k[--$j];var _Oo=$k[--$j];$k[$j++]=_Oo;$k[$j++]=_On;if((_On>=0)&&(_Oo<$1.mrows)){var _Oq=$k[--$j];var _Or=$k[--$j];$k[$j++]=_Or;$k[$j++]=_Oq;if($get($1.mmat,$f(_Oq+(_Or*$1.mcols)))==-1){$k[$j++]=$1.dmn;$1.module();}}
var _Ow=$k[--$j];var _Ox=$k[--$j];$k[$j++]=$f(_Ox-2);$k[$j++]=$f(_Ow+2);if(!(($f(_Ow+2)<$1.mcols)&&($f(_Ox-2)>=0))){break;}}
var _Oz=$k[--$j];var _P0=$k[--$j];$k[$j++]=$f(_P0+1);$k[$j++]=$f(_Oz+3);for(;;){var _P1=$k[--$j];var _P2=$k[--$j];$k[$j++]=_P2;$k[$j++]=_P1;if((_P1<$1.mcols)&&(_P2>=0)){var _P4=$k[--$j];var _P5=$k[--$j];$k[$j++]=_P5;$k[$j++]=_P4;if($get($1.mmat,$f(_P4+(_P5*$1.mcols)))==-1){$k[$j++]=$1.dmn;$1.module();}}
var _PA=$k[--$j];var _PB=$k[--$j];$k[$j++]=$f(_PB+2);$k[$j++]=$f(_PA-2);if(!(($f(_PA-2)>=0)&&($f(_PB+2)<$1.mrows))){break;}}
var _PD=$k[--$j];var _PE=$k[--$j];$k[$j++]=$f(_PE+3);$k[$j++]=$f(_PD+1);if(!(($f(_PD+1)<$1.mcols)||($f(_PE+3)<$1.mrows))){$j-=2;break;}}
if($get($1.mmat,$f(($1.mrows*$1.mcols)-1))==-1){$puti($1.mmat,$f(($1.mrows*$f($1.mcols-1))-2),$a([1,0]));$puti($1.mmat,$f(($1.mrows*$1.mcols)-2),$a([0,1]));}
$1.pixs=$a($1.rows*$1.cols);$1.cwpos=0;for(var _PY=0,_PX=$f($1.rows-1);_PY<=_PX;_PY+=1){$1.i=_PY;if(($1.i%($1.rrows+2))==0){$k[$j++]=$1.pixs;$k[$j++]=$1.i*$1.cols;$k[$j++]=Infinity;for(var _Pf=0,_Pg=~~($1.cols/2);_Pf<_Pg;_Pf++){$k[$j++]=1;$k[$j++]=0;}
var _Ph=$a();var _Pi=$k[--$j];$puti($k[--$j],_Pi,_Ph);}
if(($1.i%($1.rrows+2))==($1.rrows+1)){$k[$j++]=$1.pixs;$k[$j++]=$1.i*$1.cols;$k[$j++]=Infinity;for(var _Pr=0,_Ps=$1.cols;_Pr<_Ps;_Pr++){$k[$j++]=1;}
var _Pt=$a();var _Pu=$k[--$j];$puti($k[--$j],_Pu,_Pt);}
if((($1.i%($1.rrows+2))!=0)&&(($1.i%($1.rrows+2))!=($1.rrows+1))){for(var _Q3=0,_Q2=$f($1.cols-1);_Q3<=_Q2;_Q3+=1){$1.j=_Q3;if(($1.j%($1.rcols+2))==0){$put($1.pixs,$f(($1.i*$1.cols)+$1.j),1);}
if(($1.j%($1.rcols+2))==($1.rcols+1)){$put($1.pixs,$f(($1.i*$1.cols)+$1.j),$1.i%2);}
if((($1.j%($1.rcols+2))!=0)&&(($1.j%($1.rcols+2))!=($1.rcols+1))){$put($1.pixs,$f(($1.i*$1.cols)+$1.j),$get($1.mmat,$1.cwpos));$1.cwpos=$1.cwpos+1;}}}}
var _Qb=new Map([["ren",bwipp_renmatrix],["pixs",$1.pixs],["pixx",$1.cols],["pixy",$1.rows],["height",($1.rows*2)/72],["width",($1.cols*2)/72],["opt",$1.options]]);$k[$j++]=_Qb;if(!$1.dontdraw){bwipp_renmatrix();}}
function DrawingCanvas(opts,canvas){if(typeof window==null){throw new Error('DrawingCanvas: not a browser');}
var img;var ctx=canvas.getContext('2d');var drawing=DrawingBuiltin(opts);drawing.image=image;drawing.end=end;return drawing;function image(width,height){canvas.width=width;canvas.height=height;ctx.setTransform(1,0,0,1,0,0);if(/^[0-9a-fA-F]{6}$/.test(''+opts.backgroundcolor)){ctx.fillStyle='#'+opts.backgroundcolor;ctx.fillRect(0,0,width,height);}else{ctx.clearRect(0,0,width,height);}
img=ctx.getImageData(0,0,width,height);return{buffer:img.data,ispng:false};}
function end(){ctx.putImageData(img,0,0);}}
function DrawingBuiltin(opts){var floor=Math.floor;var tx0=0,tx1=0,tx2=0,tx3=0;var ty0=0,ty1=0,ty2=0,ty3=0;var gs_image,gs_rowbyte;var gs_width,gs_height;var gs_dx,gs_dy;var gs_r,gs_g,gs_b;var gs_xymap;return{scale:function(sx,sy){return[(sx|0)||1,(sy|0)||1];},measure:function(str,font,fwidth,fheight){fwidth=fwidth|0;fheight=fheight|0;var fontid=FontLib.lookup(font);var width=0;var ascent=0;var descent=0;for(var i=0,l=str.length;i<l;i++){var ch=str.charCodeAt(i);var glyph=FontLib.getglyph(fontid,ch,fwidth,fheight);ascent=Math.max(ascent,glyph.top);descent=Math.max(descent,glyph.height-glyph.top);if(i==l-1){width+=glyph.left+glyph.width;}else{width+=glyph.advance;}}
return{width:width,ascent:ascent,descent:descent};},init:function(width,height){var padl=opts.paddingleft;var padr=opts.paddingright;var padt=opts.paddingtop;var padb=opts.paddingbottom;var rot=opts.rotate||'N';width+=padl+padr;height+=padt+padb;if(+opts.sizelimit&&+opts.sizelimit<width*height){throw new Error('Image size over limit');}
switch(rot){case'R':tx1=-1;tx2=1;ty0=1;break;case'I':tx0=-1;tx2=1;ty1=-1;ty3=1;break;case'L':tx1=1;ty0=-1;ty3=1;break;default:tx0=ty1=1;break;}
var swap=rot=='L'||rot=='R';gs_width=swap?height:width;gs_height=swap?width:height;gs_dx=padl;gs_dy=padt;gs_xymap=[];gs_xymap.min=Infinity;gs_r=gs_g=gs_b=0;var res=this.image(gs_width,gs_height);gs_image=res.buffer;gs_rowbyte=res.ispng?1:0;},line:function(x0,y0,x1,y1,lw,rgb){x0=x0|0;y0=y0|0;x1=x1|0;y1=y1|0;lw=Math.round(lw)||1;if(y1<y0){var t=y0;y0=y1;y1=t;}
if(x1<x0){var t=x0;x0=x1;x1=t;}
gs_r=parseInt(rgb.substr(0,2),16);gs_g=parseInt(rgb.substr(2,2),16);gs_b=parseInt(rgb.substr(4,2),16);var w2=(lw/2)|0;if(x0==x1){x0=x0-lw+w2;x1=x1+w2-1;}else{y0=y0-w2;y1=y1+lw-w2-1;}
for(var y=y0;y<=y1;y++){for(var x=x0;x<=x1;x++){set(x,y,255);}}},polygon:function(pts){var npts=pts.length;for(var j=npts-1,i=0;i<npts;j=i++){if(pts[j][0]==pts[i][0]){var xj=pts[j][0]|0;var yj=pts[j][1]|0;var yi=pts[i][1]|0;if(yj>yi){for(var y=yi+1;y<yj;y++){addPoint(xj,y);}}else{for(var y=yj+1;y<yi;y++){addPoint(xj,y);}}}else{var xj=pts[j][0]|0;var xi=pts[i][0]|0;var yj=pts[j][1]|0;if(xj<xi){var yl=pts[j==0?npts-1:j-1][1];var yr=pts[i==npts-1?0:i+1][1];if(yl>yj){addPoint(xj,yj);}
if(yr>yj){addPoint(xi,yj);}}else{var yl=pts[i==npts-1?0:i+1][1];var yr=pts[j==0?npts-1:j-1][1];if(yl>yj){addPoint(xi,yj);}
if(yr>yj){addPoint(xj,yj);}}}}},hexagon:function(pts,rgb){var x=pts[0][0]|0;var y=pts[0][1]|0;var qh=pts[1][1]-pts[0][1];var vh=pts[2][1]-pts[1][1]-1;var xl=pts[2][0];var xr=pts[4][0];gs_r=parseInt(rgb.substr(0,2),16);gs_g=parseInt(rgb.substr(2,2),16);gs_b=parseInt(rgb.substr(4,2),16);fillSegment(x,x+1,y++);for(var k=1;k<qh;k++){fillSegment(x-2*k,x+1+2*k,y++);}
for(var k=0;k<=vh;k++){fillSegment(xl,xr,y++);}
for(var k=qh-1;k>=1;k--){fillSegment(x-2*k,x+1+2*k,y++);}
fillSegment(x,x+1,y);},ellipse:function(x,y,rx,ry,ccw){drawEllipse(x-rx,y-ry,x+rx,y+ry,ccw);},fill:function(rgb){gs_r=parseInt(rgb.substr(0,2),16);gs_g=parseInt(rgb.substr(2,2),16);gs_b=parseInt(rgb.substr(4,2),16);evenodd();gs_xymap=[];gs_xymap.min=Infinity;},text:function(x,y,str,rgb,font){x=x|0;y=y|0;gs_r=parseInt(rgb.substr(0,2),16);gs_g=parseInt(rgb.substr(2,2),16);gs_b=parseInt(rgb.substr(4,2),16);var fontid=FontLib.lookup(font.name);var fwidth=font.width|0;var fheight=font.height|0;var dx=font.dx|0;for(var k=0;k<str.length;k++){var ch=str.charCodeAt(k);var glyph=FontLib.getglyph(fontid,ch,fwidth,fheight);var gt=y-glyph.top;var gl=glyph.left;var gw=glyph.width;var gh=glyph.height;var gb=glyph.bytes;var go=glyph.offset;for(var i=0;i<gw;i++){for(var j=0;j<gh;j++){var a=gb[go+j*gw+i];if(a){set(x+gl+i,gt+j,a);}}}
x+=glyph.advance+dx;}},end:function(){},};function set(x,y,a){x+=gs_dx;y+=gs_dy;var tx=tx0*x+tx1*y+tx2*(gs_width-1)+tx3*(gs_height-1);var ty=ty0*x+ty1*y+ty2*(gs_width-1)+ty3*(gs_height-1);var offs=(ty*gs_width+tx)*4+(ty+1)*gs_rowbyte;var dsta=gs_image[offs+3]/255;var srca=a/255;var inva=(1-srca)*dsta;var outa=srca+inva;gs_image[offs+0]=((gs_r*srca+gs_image[offs+0]*inva)/outa)|0;gs_image[offs+1]=((gs_g*srca+gs_image[offs+1]*inva)/outa)|0;gs_image[offs+2]=((gs_b*srca+gs_image[offs+2]*inva)/outa)|0;gs_image[offs+3]=(255*outa)|0;}
function addPoint(x,y){if(gs_xymap.min>y)gs_xymap.min=y;if(!gs_xymap[y]){gs_xymap[y]=[x];}else{gs_xymap[y].push(x);}}
function fillSegment(x0,x1,y){while(x0<=x1){set(x0++,y,255);}}
function evenodd(){var ymin=gs_xymap.min;var ymax=gs_xymap.length-1;for(var y=ymin;y<=ymax;y++){var pts=gs_xymap[y];if(!pts){continue}
pts.sort(function(a,b){return a-b;});var wn=false;var xl=0;for(var n=0,npts=pts.length;n<npts;n++){var x=pts[n];if(wn){fillSegment(xl,x-1,y);}else{xl=x;}
wn=!wn;}}}
function drawEllipse(x0,y0,x1,y1,dir){x0=x0|0;y0=y0|0;x1=x1|0;y1=y1|0;var a=Math.abs(x1-x0);var b=Math.abs(y1-y0);var b1=b&1;var dx=4*(1-a)*b*b;var dy=4*(b1+1)*a*a;var err=dx+dy+b1*a*a;var e2;var left=[],right=[];left.min=right.min=Infinity;if(x0>x1){x0=x1;x1+=a;}
if(y0>y1)y0=y1;y0+=((b+1)/2)|0;y1=y0-b1;a*=8*a;b1=8*b*b;do{maxedge(right,x1,y0);minedge(left,x0,y0);minedge(left,x0,y1);maxedge(right,x1,y1);e2=2*err;if(e2>=dx){x0++;x1--;dx+=b1;err+=dx;}
if(e2<=dy){y0++;y1--;dy+=a;err+=dy;}}while(x0<=x1);while(y0-y1<b){maxedge(right,x1+1,y0);minedge(left,x0-1,y0++);minedge(left,x0-1,y1);maxedge(right,x1+1,y1--);}
for(var y=left.min,max=left.length-1;y<=max;y++){addPoint(left[y],y);}
for(var y=right.min,max=right.length-1;y<=max;y++){addPoint(right[y]+1,y);}
function minedge(e,x,y){if(e.min>y)e.min=y;var ey=e[y];if(ey==null||ey>x){e[y]=x;}}
function maxedge(e,x,y){if(e.min>y)e.min=y;var ey=e[y];if(ey==null||ey<x){e[y]=x;}}}
function polydir(pts){var xp=0;for(var i=0,l=pts.length,j=l-1;i<l;j=i++){xp+=pts[j][0]*pts[i][1]-pts[i][0]*pts[j][1];}
return xp>0?1:-1;}}
function FixupOptions(opts){var scale=opts.scale||2;var scaleX=+opts.scaleX||scale;var scaleY=+opts.scaleY||scaleX;opts.paddingleft=padding(opts.paddingleft,opts.paddingwidth,opts.padding,scaleX);opts.paddingright=padding(opts.paddingright,opts.paddingwidth,opts.padding,scaleX);opts.paddingtop=padding(opts.paddingtop,opts.paddingheight,opts.padding,scaleY);opts.paddingbottom=padding(opts.paddingbottom,opts.paddingheight,opts.padding,scaleY);if(/^[0-9a-fA-F]{8}$/.test(''+opts.backgroundcolor)){var cmyk=opts.backgroundcolor;var c=parseInt(cmyk.substr(0,2),16)/255;var m=parseInt(cmyk.substr(2,2),16)/255;var y=parseInt(cmyk.substr(4,2),16)/255;var k=parseInt(cmyk.substr(6,2),16)/255;var r=Math.floor((1-c)*(1-k)*255).toString(16);var g=Math.floor((1-m)*(1-k)*255).toString(16);var b=Math.floor((1-y)*(1-k)*255).toString(16);opts.backgroundcolor=(r.length==1?'0':'')+r+
(g.length==1?'0':'')+g+
(b.length==1?'0':'')+b;}
return opts;function padding(a,b,c,s){if(a!=null){return a*s;}
if(b!=null){return b*s;}
return c*s||0;}}
var BWIPJS=(function(){var floor=Math.floor;var round=Math.round;var ceil=Math.ceil;var min=Math.min;var max=Math.max;function BWIPJS(drawing){if(this.constructor!==BWIPJS){return new BWIPJS(drawing);}
this.gstk=[];this.cmds=[];this.drawing=drawing;this.reset();this.minx=this.miny=Infinity;this.maxx=this.maxy=-Infinity;};BWIPJS.prototype.reset=function(){this.g_tdx=0;this.g_tdy=0;this.g_tsx=1;this.g_tsy=1;this.g_posx=0;this.g_posy=0;this.g_penw=1;this.g_path=[];this.g_font=null;this.g_rgb=[0,0,0];};BWIPJS.prototype.save=function(){var ctx={};for(var id in this){if(id.indexOf('g_')==0){ctx[id]=clone(this[id]);}}
this.gstk.push(ctx);function clone(v){if(v instanceof Array){var t=[];for(var i=0;i<v.length;i++)
t[i]=clone(v[i]);return t;}
if(v instanceof Object){var t={};for(var id in v)
t[id]=clone(v[id]);return t;}
return v;}};BWIPJS.prototype.restore=function(){if(!this.gstk.length){throw new Error('grestore: stack underflow');}
var ctx=this.gstk.pop();for(var id in ctx){this[id]=ctx[id];}};BWIPJS.prototype.currpos=function(){return{x:(this.g_posx-this.g_tdx)/this.g_tsx,y:(this.g_posy-this.g_tdy)/this.g_tsy};};BWIPJS.prototype.currfont=function(){return this.g_font;};BWIPJS.prototype.translate=function(x,y){this.g_tdx=this.g_tsx*x;this.g_tdy=this.g_tsy*y;};BWIPJS.prototype.scale=function(x,y){this.g_tsx*=x;this.g_tsy*=y;var sxy=this.drawing.scale(this.g_tsx,this.g_tsy);if(sxy&&sxy[0]&&sxy[1]){this.g_tsx=sxy[0];this.g_tsy=sxy[1];}};BWIPJS.prototype.setlinewidth=function(w){this.g_penw=w;};BWIPJS.prototype.selectfont=function(f,z){this.g_font={FontName:this.jsstring(f),FontSize:+z};};BWIPJS.prototype.getfont=function(){return this.g_font.FontName;};BWIPJS.prototype.jsstring=function(s){if(s instanceof Uint8Array){for(var i=0,l=s.length;i<l&&s[i];i++);if(i<l){return String.fromCharCode.apply(null,s.subarray(0,i));}
return String.fromCharCode.apply(null,s)}
return''+s;};BWIPJS.prototype.setcolor=function(s){if(s instanceof Uint8Array){s=this.jsstring(s);}
if(s.length==6){var r=parseInt(s.substr(0,2),16);var g=parseInt(s.substr(2,2),16);var b=parseInt(s.substr(4,2),16);this.g_rgb=[r,g,b];}else if(s.length==8){var c=parseInt(s.substr(0,2),16)/255;var m=parseInt(s.substr(2,2),16)/255;var y=parseInt(s.substr(4,2),16)/255;var k=parseInt(s.substr(6,2),16)/255;var r=round((1-c)*(1-k)*255);var g=round((1-m)*(1-k)*255);var b=round((1-y)*(1-k)*255);this.g_rgb=[r,g,b];}};BWIPJS.prototype.getRGB=function(){var r=this.g_rgb[0].toString(16);var g=this.g_rgb[1].toString(16);var b=this.g_rgb[2].toString(16);return'00'.substr(r.length)+r+'00'.substr(g.length)+g+'00'.substr(b.length)+b;};BWIPJS.prototype.newpath=function(){this.g_path=[];};BWIPJS.prototype.closepath=function(){var path=this.g_path;var plen=path.length;if(!plen)return;var f=plen-1;for(;f>=0&&path[f].op=='l';f--);f++;if(f<plen-1){var poly=[];var xmin=Infinity;var ymin=Infinity;var xmax=-Infinity;var ymax=-Infinity;for(var i=f;i<plen;i++){var a=path[i];poly.push([a.x0,a.y0]);if(xmin>a.x0)xmin=a.x0;if(xmax<a.x0)xmax=a.x0;if(ymin>a.y0)ymin=a.y0;if(ymax<a.y0)ymax=a.y0;}
var a=path[plen-1];var b=path[f];if(a.x1!=b.x0||a.y1!=b.y0){poly.push([a.x1,a.y1]);if(xmin>a.x1)xmin=a.x1;if(xmax<a.x1)xmax=a.x1;if(ymin>a.y1)ymin=a.y1;if(ymax<a.y1)ymax=a.y1;}
path.splice(f,plen-f,{op:'p',x0:xmin,y0:ymin,x1:xmax,y1:ymax,poly:poly});}else{path.push({op:'c'});}};BWIPJS.prototype.moveto=function(x,y){this.g_posx=this.g_tdx+this.g_tsx*x;this.g_posy=this.g_tdy+this.g_tsy*y;};BWIPJS.prototype.rmoveto=function(x,y){this.g_posx+=this.g_tsx*x;this.g_posy+=this.g_tsy*y;};BWIPJS.prototype.lineto=function(x,y){var x0=round(this.g_posx);var y0=round(this.g_posy);this.g_posx=this.g_tdx+this.g_tsx*x;this.g_posy=this.g_tdy+this.g_tsy*y;var x1=round(this.g_posx);var y1=round(this.g_posy);this.g_path.push({op:'l',x0:x0,y0:y0,x1:x1,y1:y1});};BWIPJS.prototype.rlineto=function(x,y){var x0=round(this.g_posx);var y0=round(this.g_posy);this.g_posx+=this.g_tsx*x;this.g_posy+=this.g_tsy*y;var x1=round(this.g_posx);var y1=round(this.g_posy);this.g_path.push({op:'l',x0:x0,y0:y0,x1:x1,y1:y1});};BWIPJS.prototype.arc=function(x,y,r,sa,ea,ccw){if(sa==ea){return;}
if(sa!=0&&sa!=360||ea!=0&&ea!=360){throw new Error('arc: not a full circle ('+sa+','+ea+')');}
x=this.g_tdx+this.g_tsx*x;y=this.g_tdy+this.g_tsy*y;var rx=r*this.g_tsx;var ry=r*this.g_tsy;this.g_path.push({op:'e',x0:x-rx,y0:y-ry,x1:x+rx,y1:y+ry,x:x,y:y,rx:rx,ry:ry,sa:sa,ea:ea,ccw:ccw});};BWIPJS.prototype.stringwidth=function(str){var tsx=this.g_tsx;var tsy=this.g_tsy;var size=+this.g_font.FontSize||10;str=this.jsstring(str);var bbox=this.drawing.measure(str,this.g_font.FontName,size*tsx,size*tsy);return{w:bbox.width/tsx,h:(bbox.ascent+bbox.descent)/tsy,a:bbox.ascent/tsy,d:bbox.descent/tsy};};BWIPJS.prototype.charpath=function(str,b){var sw=this.stringwidth(str);this.rlineto(0,sw.a);this.rlineto(sw.w,0);this.rlineto(0,-sw.h);};BWIPJS.prototype.pathbbox=function(){if(!this.g_path.length)throw new Error('pathbbox: --nocurrentpoint--');var path=this.g_path;var llx=Infinity;var lly=Infinity;var urx=-Infinity;var ury=-Infinity;for(var i=0;i<path.length;i++){var a=path[i];if(a.op=='c'){continue;}
if(a.x0<a.x1){if(llx>a.x0)llx=a.x0;if(urx<a.x1)urx=a.x1;}else{if(llx>a.x1)llx=a.x1;if(urx<a.x0)urx=a.x0;}
if(a.y0<a.y1){if(lly>a.y0)lly=a.y0;if(ury<a.y1)ury=a.y1;}else{if(lly>a.y1)lly=a.y1;if(ury<a.y0)ury=a.y0;}}
var rv={llx:(llx-this.g_tdx)/this.g_tsx,lly:(lly-this.g_tdy)/this.g_tsy,urx:(urx-this.g_tdx)/this.g_tsx,ury:(ury-this.g_tdy)/this.g_tsy};return rv;};BWIPJS.prototype.transform=function(pts){var minx=this.minx;var maxy=this.maxy;for(var i=0;i<pts.length;i++){var pt=pts[i];pt[0]=pt[0]-minx;pt[1]=maxy-pt[1];}};BWIPJS.prototype.stroke=function(){var tsx=this.g_tsx;var tsy=this.g_tsy;var path=this.g_path;var rgb=this.getRGB();this.g_path=[];var penw=floor(this.g_penw*tsx+0.66);var penh=floor(this.g_penw*tsy+0.66);var nlines=0,npolys=0;for(var i=0;i<path.length;i++){var a=path[i];if(a.op=='l'){if(a.x0!=a.x1&&a.y0!=a.y1){throw new Error('stroke: --not-orthogonal--');}
var x0=a.x0;var y0=a.y0;var x1=a.x1;var y1=a.y1;var penw2=penw/2;var penh2=penh/2;if(x0>x1){var t=x0;x0=x1;x1=t;}
if(y0>y1){var t=y0;y0=y1;y1=t;}
if(x0==x1){this.bbox(x0-penw2,y0,x0+penw-penw2-1,y1);}else{this.bbox(x0,y0-penh+penh2+1,x1,y1+penh2);}
nlines++;}else if(a.op=='p'){var minx=Infinity;var miny=Infinity;var maxx=-Infinity;var maxy=-Infinity;var pts=a.poly;if(pts.length!=4){throw new Error('stroke: --not-a-rect--');}
for(var i=0,j=pts.length-1;i<pts.length;j=i++){var xj=pts[j][0];var yj=pts[j][1];var xi=pts[i][0];var yi=pts[i][1];if(xi!=xj&&yi!=yj){throw new Error('stroke: --not-orthogonal--');}
if(xi<minx)minx=xi;if(xi>maxx)maxx=xi;if(yi<miny)miny=yi;if(yi>maxy)maxy=yi;}
var penw2=ceil(penw/2);var penh2=ceil(penh/2);this.bbox(minx-penw2,miny-penh2,maxx+penw2,maxy+penh2);npolys++;}else{throw new Error('stroke: --not-a-line--');}}
var self=this;this.cmds.push(function(){var bigw2=ceil(penw/2);var bigh2=ceil(penh/2);var remw2=penw-bigw2;var remh2=penh-bigh2;for(var i=0;i<path.length;i++){var a=path[i]
if(a.op=='l'){var pts=[[a.x0,a.y0],[a.x1,a.y1]];self.transform(pts);self.drawing.line(pts[0][0],pts[0][1],pts[1][0],pts[1][1],a.x0==a.x1?penw:penh,rgb);self.fill(rgb);}else{var pts=a.poly;self.transform(pts);var x0=min(pts[0][0],pts[2][0]);var x1=max(pts[0][0],pts[2][0]);var y0=min(pts[0][1],pts[2][1]);var y1=max(pts[0][1],pts[2][1]);self.drawing.polygon([[x0-bigw2,y0-bigh2],[x0-bigw2,y1+bigh2+1],[x1+bigw2+1,y1+bigh2+1],[x1+bigw2+1,y0-bigh2]]);self.drawing.polygon([[x0+remw2,y0+remh2],[x0+remw2,y1-remh2+1],[x1-remw2+1,y1-remh2+1],[x1-remw2+1,y0+remh2],]);self.drawing.fill(rgb);}}});};BWIPJS.prototype.fill=function(){var path=this.g_path;var rgb=this.getRGB();this.g_path=[];for(var p=0;p<path.length;p++){var a=path[p];if(a.op=='p'){var minx=Infinity;var miny=Infinity;var maxx=-Infinity;var maxy=-Infinity;var pts=a.poly;for(var i=0;i<pts.length;i++){var xi=pts[i][0];var yi=pts[i][1];if(xi<minx)minx=xi;if(xi>maxx)maxx=xi;if(yi<miny)miny=yi;if(yi>maxy)maxy=yi;}
this.bbox(minx,miny+1,maxx-1,maxy);}else if(a.op=='e'){this.bbox(a.x-a.rx,a.y-a.ry,a.x+a.rx,a.y+a.ry);}else{throw new Error('fill: --not-a-polygon--');}}
var self=this;this.cmds.push(function(){for(var i=0;i<path.length;i++){var a=path[i];if(a.op=='p'){var pts=a.poly
self.transform(pts);self.drawing.polygon(pts);}else if(a.op=='e'){var pts=[[a.x,a.y]];self.transform(pts);self.drawing.ellipse(pts[0][0],pts[0][1],a.rx,a.ry,a.ccw);}}
self.drawing.fill(rgb);});};BWIPJS.prototype.maxicode=function(pix){var tsx=this.g_tsx;var tsy=this.g_tsy;var rgb=this.getRGB();var twidth=1.04*tsx*100;var mwidth=(twidth/30)|0;if(twidth-(mwidth*30-1)>9){mwidth++;}
var w,h,wgap,hgap;wgap=(tsx/2)|0;hgap=(tsy/2)|0;w=mwidth-wgap;if(w&1){w--;}
h=((4*tsy)|0)-hgap;var w2=w/2-1;var qh=((w2+1)/2)|0;var vh=h-2-2*qh;this.bbox(0,0,mwidth*30-wgap,tsy*3*32+tsy*4-hgap);var self=this;this.cmds.push(function(){for(var i=0;i<pix.length;i++){var c=pix[i];var x=c%30;var y=(c/30)|0;x*=mwidth;x+=(y&1)?mwidth:mwidth/2;x=x|0;y=33-y;y*=tsy*3;y+=tsy*2-h/2;y=y|0;var pts=[[x-0.5,y--]];y-=qh-1;pts.push([x-1-w2,y--]);y-=vh;pts.push([x-1-w2,y--]);y-=qh-1;pts.push([x-0.5,y++]);y+=qh-1;pts.push([x+w2,y++]);y+=vh;pts.push([x+w2,y++]);self.transform(pts);self.drawing.hexagon(pts,rgb);}
self.drawing.fill(rgb);var x=(14*mwidth+mwidth/2+0.01)|0;var y=((12*4+3)*tsy-qh/2+0.01)|0;self.drawing.ellipse(x,y,(0.5774*3.5*tsx+0.01)|0,(0.5774*3.5*tsy+0.01)|0,true);self.drawing.ellipse(x,y,(1.3359*3.5*tsx+0.01)|0,(1.3359*3.5*tsy+0.01)|0,false);self.drawing.fill(rgb);self.drawing.ellipse(x,y,(2.1058*3.5*tsx+0.01)|0,(2.1058*3.5*tsy+0.01)|0,true);self.drawing.ellipse(x,y,(2.8644*3.5*tsx+0.01)|0,(2.8644*3.5*tsy+0.01)|0,false);self.drawing.fill(rgb);self.drawing.ellipse(x,y,(3.6229*3.5*tsx+0.01)|0,(3.6229*3.5*tsy+0.01)|0,true);self.drawing.ellipse(x,y,(4.3814*3.5*tsx+0.01)|0,(4.3814*3.5*tsy+0.01)|0,false);self.drawing.fill(rgb);});};BWIPJS.prototype.show=function(str,dx,dy){if(!str.length){return;}
var tsx=this.g_tsx;var tsy=this.g_tsy;var name=this.g_font.FontName||'OCR-B';var size=(this.g_font.FontSize||10);var szx=size*tsx;var szy=size*tsy;var posx=this.g_posx;var posy=this.g_posy;var rgb=this.getRGB();str=this.jsstring(str);dx=tsx*dx||0;dy=tsy*dy||0;var base=posy+dy;var bbox=this.drawing.measure(str,name,szx,szy);var width=bbox.width+(str.length-1)*dx;this.bbox(posx,base-bbox.descent+1,posx+width-1,base+bbox.ascent);this.g_posx+=width;var self=this;self.cmds.push(function(){var x=posx-self.minx;var y=self.maxy-posy;self.drawing.text(x,y,str,rgb,{name:name,width:szx,height:szy,dx:dx});});};BWIPJS.prototype.bbox=function(x0,y0,x1,y1){if(x0>x1){var t=x0;x0=x1;x1=t;}
if(y0>y1){var t=y0;y0=y1;y1=t;}
x0=floor(x0);y0=floor(y0);x1=ceil(x1);y1=ceil(y1);if(this.minx>x0)this.minx=x0;if(this.maxx<x1)this.maxx=x1;if(this.miny>y0)this.miny=y0;if(this.maxy<y1)this.maxy=y1;};BWIPJS.prototype.render=function(){if(this.minx===Infinity){return new Promise(function(resolve,reject){resolve(null);});}
this.drawing.init(this.maxx-this.minx+1,this.maxy-this.miny+1,this.g_tsx,this.g_tsy);for(var i=0,l=this.cmds.length;i<l;i++){this.cmds[i]();}
return this.drawing.end();};return BWIPJS;})();var BWIPJS_OPTIONS={bcid:1,text:1,scale:1,scaleX:1,scaleY:1,rotate:1,padding:1,paddingwidth:1,paddingheight:1,paddingtop:1,paddingleft:1,paddingright:1,paddingbottom:1,backgroundcolor:1,};function bwipp_pharmacode2(){var $1={};$1.options=$k[--$j];$1.barcode=$k[--$j];$1.dontdraw=false;$1.includetext=false;$1.height=4;$forall($1.options,function(){var _3=$k[--$j];$1[$k[--$j]]=_3;});$1.height=+$1.height;if(($1.barcode.length<1)||($1.barcode.length>8)){$k[$j++]='bwipp.pharmacode2BadLength';$k[$j++]="Two-track Pharmacode must be 1 to 6 digits";bwipp_raiseerror();}
$forall($1.barcode,function(){var _9=$k[--$j];if((_9<48)||(_9>57)){$k[$j++]='bwipp.pharmacode2badCharacter';$k[$j++]="Two-track Pharmacode must contain only digits";bwipp_raiseerror();}});var _B=~~$z($1.barcode);if((_B<4)||(_B>64570080)){$k[$j++]='bwipp.pharmacode2badValue';$k[$j++]="Two-track Pharmacode value must be between 4 and 64570080";bwipp_raiseerror();}
$1.txt=$a($1.barcode.length);for(var _G=0,_F=$1.barcode.length-1;_G<=_F;_G+=1){$1.i=_G;$put($1.txt,$1.i,$a([$geti($1.barcode,$1.i,1),0,0,"",0]));}
$1.encstr=$s(16);$1.sbs=$a(32);$1.bar=(1/25.4)*$1.height;$1.spc=(1/25.4)*72;$1.i=15;$1.val=~~$z($1.barcode);for(;;){if($1.val==0){break;}
var _T=$1.val%3;$1.val=~~($f($1.val-$get($a([3,1,2]),_T))/3);$put($1.encstr,$1.i,$get($a([2,0,1]),_T));$1.i=$1.i-1;}
$1.encstr=$geti($1.encstr,$1.i+1,15-$1.i);$1.bhs=$a($1.encstr.length);$1.bbs=$a($1.encstr.length);for(var _m=0,_l=$1.encstr.length-1;_m<=_l;_m+=1){$1.i=_m;var _p=$get($1.encstr,$1.i);$put($1.bhs,$1.i,$1.bar*$get($a([1,1,2]),_p));$put($1.bbs,$1.i,$get($a([0,$1.bar,0]),_p));}
$k[$j++]=Infinity;var _10=$1.bhs;var _11=$1.bbs;$k[$j++]=Infinity;for(var _13=0,_14=$1.encstr.length*2;_13<_14;_13++){$k[$j++]=$1.spc;}
var _16=$a();$k[$j++]='ren';$k[$j++]=bwipp_renlinear;$k[$j++]='bhs';$k[$j++]=_10;$k[$j++]='bbs';$k[$j++]=_11;$k[$j++]='sbs';$k[$j++]=_16;$k[$j++]='txt';$k[$j++]=$1.txt;$k[$j++]='textxalign';$k[$j++]="center";$k[$j++]='textyoffset';$k[$j++]=4;$k[$j++]='opt';$k[$j++]=$1.options;var _19=$d();$k[$j++]=_19;if(!$1.dontdraw){bwipp_renlinear();}}
function bwipp_encode(bwipjs,encoder,text,opts,dontdraw){if(typeof text!=='string'){throw new Error('bwipp.typeError: barcode text not a string ('+
text+')');}
opts=opts||{};if(typeof opts==='string'){var tmp=opts.split(' ');opts={};for(var i=0;i<tmp.length;i++){if(!tmp[i]){continue;}
var eq=tmp[i].indexOf('=');if(eq==-1){opts[tmp[i]]=true;}else{opts[tmp[i].substr(0,eq)]=tmp[i].substr(eq+1);}}}else if(typeof opts!=='object'||opts.constructor!==Object){throw new Error('bwipp.typeError: options not an object');}
if(/[\u0100-\uffff]/.test(text)){text=unescape(encodeURIComponent(text));}
$0.bwipjs_dontdraw=opts.dontdraw||dontdraw||false;var map=new Map;for(var id in opts){if(opts.hasOwnProperty(id)){map.set(id,opts[id]);}}
$$=bwipjs;$k=[text,map];$j=2;encoder();if($j){return $k.splice(0,$j);}
return true;}
var $f=(function(fa){return function(v){return Number.isInteger(v)?v:(fa[0]=v,fa[0]);};})(new Float32Array(1));function $aload(a){for(var i=0,l=a.length,b=a.b,o=a.o;i<l;i++){$k[$j++]=b[o+i];}}
function $put(d,k,v){if(d instanceof Uint8Array){d[k]=v;}else if(d instanceof Array){d.b[d.o+k]=v;}else if(typeof d=='object'){if(k instanceof Uint8Array){d.set($z(k),v);}else{d.set(k,v);}}else{throw'put-not-writable-'+(typeof d);}}
function bwipp_parseinput(){var $1={};$1.fncvals=$k[--$j];$1.barcode=$k[--$j];var _2='parse';$1[_2]=$get($1.fncvals,_2);delete $1.fncvals[_2];var _6='parsefnc';$1[_6]=$get($1.fncvals,_6);delete $1.fncvals[_6];var _A='parseonly';var _C=$get($1.fncvals,_A)!==undefined;$1[_A]=_C;delete $1.fncvals[_A];var _E='eci';var _G=$get($1.fncvals,_E)!==undefined;$1[_E]=_G;delete $1.fncvals[_E];$1.msg=$a($1.barcode.length);$1.j=0;$k[$j++]=$1.barcode;for(;;){$search($k[--$j],"^");var _M=$k[--$j];var _N=$k[--$j];$k[$j++]=_M;$k[$j++]=_N.length;$k[$j++]=$1.msg;$k[$j++]=$1.j;$k[$j++]=_N;$k[$j++]=Infinity;var _Q=$k[--$j];var _R=$k[--$j];$k[$j++]=_Q;$forall(_R);var _S=$a();var _T=$k[--$j];$puti($k[--$j],_T,_S);$1.j=$f($k[--$j]+$1.j);if($k[--$j]){$j--;for(var _Y=0,_Z=1;_Y<_Z;_Y++){if($an($nt($1.parse),$nt($1.parsefnc))){$put($1.msg,$1.j,94);$1.j=$f($1.j+1);break;}
$put($1.msg,$1.j,94);$1.j=$f($1.j+1);if($1.parse){var _j=$k[--$j];$k[$j++]=_j;if(_j.length>=3){var _k=$k[--$j];var _l=$geti(_k,0,3);$k[$j++]=_k;$k[$j++]=true;for(var _m=0,_n=_l.length;_m<_n;_m++){var _o=$get(_l,_m);if((_o<48)||(_o>57)){$j--;$k[$j++]=false;}}
if($k[--$j]){var _q=$k[--$j];var _r=$geti(_q,0,3);var _s=~~$z(_r);$k[$j++]=_q;$k[$j++]=_s;if(_s>255){$j-=2;$k[$j++]='bwipp.invalidOrdinal';$k[$j++]="Ordinal must be 000 to 255";bwipp_raiseerror();}
$1.j=$f($1.j-1);$put($1.msg,$1.j,$k[--$j]);$1.j=$f($1.j+1);var _y=$k[--$j];$k[$j++]=$geti(_y,3,_y.length-3);}}}
if(($or($1.parseonly,$nt($1.parsefnc)))||($get($1.msg,$f($1.j-1))!=94)){break;}
$1.j=$f($1.j-1);var _16=$k[--$j];$k[$j++]=_16;if(_16.length<3){$j--;$k[$j++]='bwipp.truncatedFNC';$k[$j++]="Function character truncated";bwipp_raiseerror();}
var _17=$k[--$j];$k[$j++]=_17;if($get(_17,0)==94){$put($1.msg,$1.j,94);$1.j=$f($1.j+1);var _1C=$k[--$j];$k[$j++]=$geti(_1C,1,_1C.length-1);break;}
var _1E=$k[--$j];$k[$j++]=_1E;if($eq($geti(_1E,0,3),"ECI")&&$1.eci){var _1H=$k[--$j];$k[$j++]=_1H;if(_1H.length<9){$j--;$k[$j++]='bwipp.truncatedECI';$k[$j++]="ECI truncated";bwipp_raiseerror();}
var _1I=$k[--$j];var _1J=$geti(_1I,3,6);$k[$j++]=_1I;$k[$j++]=_1J;for(var _1K=0,_1L=_1J.length;_1K<_1L;_1K++){var _1M=$get(_1J,_1K);if((_1M<48)||(_1M>57)){$j-=2;$k[$j++]='bwipp.invalidECI';$k[$j++]="ECI must be 000000 to 999999";bwipp_raiseerror();}}
var _1N=$k[--$j];$k[$j++]=0;$forall(_1N,function(){var _1O=$k[--$j];var _1P=$k[--$j];$k[$j++]=($f(_1P-$f(_1O-48)))*10;});$put($1.msg,$1.j,(~~($k[--$j]/10))-1000000);$1.j=$f($1.j+1);var _1U=$k[--$j];$k[$j++]=$geti(_1U,9,_1U.length-9);break;}
var _1W=$k[--$j];$k[$j++]=_1W;if(_1W.length<4){$j--;$k[$j++]='bwipp.truncatedFNC';$k[$j++]="Function character truncated";bwipp_raiseerror();}
var _1X=$k[--$j];var _1Y=$geti(_1X,0,4);var _1a=$get($1.fncvals,_1Y)!==undefined;$k[$j++]=_1X;$k[$j++]=_1Y;if(!_1a){var _1b=$k[--$j];var _1c=$s(_1b.length+28);$puti(_1c,28,_1b);$puti(_1c,0,"Unknown function character: ");var _1d=$k[--$j];$k[$j++]=_1c;$k[$j++]=_1d;$j--;var _1e=$k[--$j];$k[$j++]='bwipp.unknownFNC';$k[$j++]=_1e;bwipp_raiseerror();}
$put($1.msg,$1.j,$get($1.fncvals,$k[--$j]));$1.j=$f($1.j+1);var _1l=$k[--$j];$k[$j++]=$geti(_1l,4,_1l.length-4);break;}}else{break;}}
if($nt($1.parseonly)){$k[$j++]=$geti($1.msg,0,$1.j);}else{$k[$j++]=$s($1.j);for(var _1v=0,_1u=$f($1.j-1);_1v<=_1u;_1v+=1){var _1w=$k[--$j];$put(_1w,_1v,$get($1.msg,_1v));$k[$j++]=_1w;}}}
function $search(str,seek){if(!(str instanceof Uint8Array)){str=$s(str);}
var ls=str.length;if(seek.length==1){var lk=1;var cd=seek instanceof Uint8Array?seek[0]:seek.charCodeAt(0);for(var i=0;i<ls&&str[i]!=cd;i++);}else{if(!(seek instanceof Uint8Array)){seek=$(seek);}
var lk=seek.length;var cd=seek[0];for(var i=0;i<ls&&str[i]!=cd;i++);while(i<ls){for(var j=1;j<lk&&str[i+j]===seek[j];j++);if(j===lk){break;}
for(i++;i<ls&&str[i]!=cd;i++);}}
if(i<ls){$k[$j++]=str.subarray(i+lk);$k[$j++]=str.subarray(i,i+lk);$k[$j++]=str.subarray(0,i);$k[$j++]=true;}else{$k[$j++]=str;$k[$j++]=false;}}
function $s(v){var t=typeof v;if(t==='number'){return new Uint8Array(v);}
if(t!=='string'){v=''+v;}
var s=new Uint8Array(v.length);for(var i=0;i<v.length;i++){s[i]=v.charCodeAt(i);}
return s;}
function $puti(d,o,s){if(d instanceof Uint8Array){if(typeof s=='string'){for(var i=0,l=s.length;i<l;i++){d[o+i]=s.charCodeAt(i);}}else{for(var i=s.length-1;i>=0;i--){d[o+i]=s[i];}}}else if(d instanceof Array){var darr=d.b;var doff=o+d.o;var sarr=s.b;var soff=s.o;for(var i=0,l=s.length;i<l;i++){darr[doff+i]=sarr[soff+i];}}else{throw'putinterval-not-writable-'+(typeof d);}}
function $nt(a){return typeof a=='boolean'?!a:~a;}
function $geti(s,o,l){if(s instanceof Uint8Array){return s.subarray(o,o+l);}
if(s instanceof Array){var a=new Array(l);a.b=s.b;a.o=s.o+o;return a;}
return s.substr(o,l);}
function $cvrs(s,n,r){return $strcpy(s,(~~n).toString(r).toUpperCase());}
function $strcpy(dst,src){if(typeof dst==='string'){dst=$s(dst);}
if(src instanceof Uint8Array){for(var i=0,l=src.length;i<l;i++){dst[i]=src[i];}}else{for(var i=0,l=src.length;i<l;i++){dst[i]=src.charCodeAt(i);}}
return src.length<dst.length?dst.subarray(0,src.length):dst;}
function $d(){for(var mark=$j-1;mark>=0&&$k[mark]!==Infinity;mark-=2){if($k[mark-1]===Infinity){throw new Error('dict-malformed-stack');}}
if(mark<0){throw'dict-marker-not-found';}
var d=new Map;for(var i=mark+1;i<$j;i+=2){var k=$k[i];var t=typeof k;if(t=='number'||t=='string'){d.set(k,$k[i+1]);}else if(k instanceof Uint8Array){d.set($z(k),$k[i+1]);}else{throw'dict-not-a-valid-key('+k+')';}}
$j=mark;return d;}
function $xo(a,b){return(typeof a==='boolean')?!a&&b||a&&!b:a^b;}
function bwipp_renmatrix(){if($0.bwipjs_dontdraw){return;}
var $1={};$1.args=$k[--$j];$1.width=1;$1.height=1;$1.barcolor="unset";$1.backgroundcolor="unset";$1.colormap="unset";$1.dotty=false;$1.inkspread=0;$1.inkspreadh=0;$1.inkspreadv=0;$1.includetext=false;$1.txt=$a([]);$1.textcolor="unset";$1.textxalign="unset";$1.textyalign="unset";$1.textfont="OCR-B";$1.textsize=10;$1.textxoffset=0;$1.textyoffset=0;$1.textgaps=0;$1.alttext="";$forall($1.args,function(){var _4=$k[--$j];$1[$k[--$j]]=_4;});var _6=$1.opt;for(var _B=_6.size,_A=_6.keys(),_9=0;_9<_B;_9++){var _7=_A.next().value;$1[_7]=_6.get(_7);}
$1.width=+$1.width;$1.height=+$1.height;$1.barcolor=""+$1.barcolor;$1.backgroundcolor=""+$1.backgroundcolor;$1.inkspread=+$1.inkspread;$1.inkspreadh=+$1.inkspreadh;$1.inkspreadv=+$1.inkspreadv;$1.textcolor=""+$1.textcolor;$1.textxalign=""+$1.textxalign;$1.textyalign=""+$1.textyalign;$1.textfont=""+$1.textfont;$1.textsize=+$1.textsize;$1.textxoffset=+$1.textxoffset;$1.textyoffset=+$1.textyoffset;$1.textgaps=+$1.textgaps;$1.alttext=""+$1.alttext;if($1.inkspread!=0){$1.inkspreadh=$1.inkspread;}
if($1.inkspread!=0){$1.inkspreadv=$1.inkspread;}
$1.xyget=function(){var _X=$k[--$j];var _a=$get($1.pixs,$f($k[--$j]+(_X*$1.pixx)));$k[$j++]=_a;};$1.cget=function(){var _c=$k[--$j];var _f=$get($1.cache,$f($k[--$j]+(_c*$1.pixx)));var _g=$k[--$j];$k[$j++]=$an(_g,_f);};$1.cput=function(){var _h=$k[--$j];$k[$j++]=_h;if((_h%4)==0){var _i=$k[--$j];var _j=$k[--$j];var _k=$k[--$j];var _l=$1.pixx;var _m=$1.cache;$put(_m,$f(_k+(_j*_l)),$or($get(_m,$f(_k+(_j*_l))),_i));}else{$j-=3;}};$1.abcd=function(){$k[$j++]=$s(4);$k[$j++]=0;$k[$j++]=Infinity;var _p=$k[--$j];var _q=$k[--$j];var _r=$k[--$j];var _s=$k[--$j];var _v=$f($k[--$j]+(_s*$1.pixx));$k[$j++]=_r;$k[$j++]=_q;$k[$j++]=_p;$k[$j++]=_v;$aload($geti($1.pixs,_v,2));var _y=$k[--$j];var _z=$k[--$j];var _13=$geti($1.pixs,$f($k[--$j]+$1.pixx),2);$k[$j++]=_z;$k[$j++]=_y;$aload(_13);var _14=$a();for(var _15=0,_16=_14.length;_15<_16;_15++){var _18=$k[--$j];var _19=$k[--$j];$put(_19,_18,$f($get(_14,_15)+48));$k[$j++]=_19;$k[$j++]=$f(_18+1);}
$j--;};$1.right=function(){if($1.dir!=1){$k[$j++]=$1.x;$k[$j++]=$1.y;$k[$j++]=$1.dir;$1.cput();$k[$j++]=$a([$1.x,$1.y]);}
$1.x=$1.x+1;$1.dir=1;};$1.down=function(){if($1.dir!=2){$k[$j++]=$1.x;$k[$j++]=$1.y;$k[$j++]=$1.dir;$1.cput();$k[$j++]=$a([$1.x,$1.y]);}
$1.y=$1.y+1;$1.dir=2;};$1.left=function(){if($1.dir!=4){$k[$j++]=$1.x;$k[$j++]=$1.y;$k[$j++]=$1.dir;$1.cput();$k[$j++]=$a([$1.x,$1.y]);}
$1.x=$1.x-1;$1.dir=4;};$1.up=function(){if($1.dir!=8){$k[$j++]=$1.x;$k[$j++]=$1.y;$k[$j++]=$1.dir;$1.cput();$k[$j++]=$a([$1.x,$1.y]);}
$1.y=$1.y-1;$1.dir=8;};$1.trace=function(){$1.y=$k[--$j];$1.x=$k[--$j];$k[$j++]='dir';$k[$j++]=$f($1.x+1);$k[$j++]=$f($1.y+1);$1.xyget();var _1l=($k[--$j]==1)?8:4;$1[$k[--$j]]=_1l;$1.sx=$1.x;$1.sy=$1.y;$1.sdir=$1.dir;$k[$j++]=Infinity;for(;;){$k[$j++]=$1.x;$k[$j++]=$1.y;$1.abcd();for(var _1s=0,_1t=1;_1s<_1t;_1s++){var _1u=$k[--$j];$k[$j++]=_1u;if($eq(_1u,"0001")||($eq(_1u,"0011")||$eq(_1u,"1011"))){$j--;$1.right();break;}
var _1v=$k[--$j];$k[$j++]=_1v;if($eq(_1v,"0010")||($eq(_1v,"1010")||$eq(_1v,"1110"))){$j--;$1.down();break;}
var _1w=$k[--$j];$k[$j++]=_1w;if($eq(_1w,"1000")||($eq(_1w,"1100")||$eq(_1w,"1101"))){$j--;$1.left();break;}
var _1x=$k[--$j];$k[$j++]=_1x;if($eq(_1x,"0100")||($eq(_1x,"0101")||$eq(_1x,"0111"))){$j--;$1.up();break;}
var _1y=$k[--$j];$k[$j++]=_1y;if($eq(_1y,"1001")){if($1.dir==2){$j--;$1.left();break;}else{$j--;$1.right();break;}}else{if($1.dir==1){$j--;$1.down();break;}else{$j--;$1.up();break;}}}
if(($eq($1.x,$1.sx)&&$eq($1.y,$1.sy))&&($1.dir==$1.sdir)){break;}}
$astore($a($counttomark()));var _29=$k[--$j];var _2A=$k[--$j];$k[$j++]=_29;$k[$j++]=_2A;$j--;};$1.drawlayer=function(){$1.pixsorig=$1.pixs;$1.pixs=$k[--$j];$k[$j++]=Infinity;for(var _2E=0,_2F=$1.pixx+2;_2E<_2F;_2E++){$k[$j++]=0;}
for(var _2J=0,_2K=$1.pixx,_2I=$1.pixs.length-1;_2K<0?_2J>=_2I:_2J<=_2I;_2J+=_2K){$k[$j++]=0;$aload($geti($1.pixs,_2J,$1.pixx));$k[$j++]=0;}
for(var _2P=0,_2Q=$1.pixx+2;_2P<_2Q;_2P++){$k[$j++]=0;}
$1.pixs=$a();$1.pixx=$1.pixx+2;$1.pixy=$1.pixy+2;$k[$j++]=Infinity;for(var _2V=0,_2W=$1.pixs.length;_2V<_2W;_2V++){$k[$j++]=0;}
$1.cache=$a();$k[$j++]=Infinity;for(var _2a=0,_2Z=$1.pixy-2;_2a<=_2Z;_2a+=1){$1.j=_2a;for(var _2d=0,_2c=$1.pixx-2;_2d<=_2c;_2d+=1){$1.i=_2d;$k[$j++]='k';$k[$j++]=$1.i;$k[$j++]=$1.j;$1.abcd();var _2g=$k[--$j];$1[$k[--$j]]=_2g;if($eq($1.k,"0001")||$eq($1.k,"1001")){$k[$j++]=8;$k[$j++]=$1.i;$k[$j++]=$1.j;$1.cget();if($k[--$j]==0){$k[$j++]=$1.i;$k[$j++]=$1.j;$1.trace();}}
if($eq($1.k,"1110")){$k[$j++]=4;$k[$j++]=$1.i;$k[$j++]=$1.j;$1.cget();if($k[--$j]==0){$k[$j++]=$1.i;$k[$j++]=$1.j;$1.trace();}}}}
$1.paths=$a();$1.pixx=$1.pixx-2;$1.pixy=$1.pixy-2;$$.newpath();var _2y=$1.paths;for(var _2z=0,_30=_2y.length;_2z<_30;_2z++){$1.p=$get(_2y,_2z);$1.len=$1.p.length;$aload($get($1.p,$1.len-1));$aload($get($1.p,0));for(var _3A=0,_39=$1.len-1;_3A<=_39;_3A+=1){$1.i=_3A;$aload($get($1.p,($1.i+1)%$1.len));var _3F=$k[--$j];var _3G=$k[--$j];var _3H=$k[--$j];var _3I=$k[--$j];var _3J=$k[--$j];var _3K=$k[--$j];$k[$j++]=_3I;$k[$j++]=_3H;$k[$j++]=_3G;$k[$j++]=_3F;$k[$j++]=_3K;$k[$j++]=_3I;$k[$j++]=$1.inkspreadh;if($lt(_3F,_3J)){var _3M=$k[--$j];var _3N=$k[--$j];$k[$j++]=$f(_3N+_3M);}else{var _3O=$k[--$j];var _3P=$k[--$j];$k[$j++]=$f(_3P-_3O);}
var _3Q=$k[--$j];var _3R=$k[--$j];var _3S=$k[--$j];var _3T=$k[--$j];var _3U=$k[--$j];$k[$j++]=_3U;$k[$j++]=_3Q;$k[$j++]=_3T;$k[$j++]=_3S;$k[$j++]=_3U;$k[$j++]=$1.inkspreadv;if($gt(_3T,_3R)){var _3W=$k[--$j];var _3X=$k[--$j];$k[$j++]=$f(_3X+_3W);}else{var _3Y=$k[--$j];var _3Z=$k[--$j];$k[$j++]=$f(_3Z-_3Y);}
var _3a=$k[--$j];var _3b=$k[--$j];var _3c=$k[--$j];var _3d=$k[--$j];$k[$j++]=_3c;$k[$j++]=_3b;$k[$j++]=_3d;$k[$j++]=$f($1.pixy-_3a);if($1.i==0){var _3g=$k[--$j];$$.moveto($k[--$j],_3g);}else{var _3i=$k[--$j];$$.lineto($k[--$j],_3i);}}
$$.closepath();$j-=4;}
$$.fill();$1.pixs=$1.pixsorig;};$1.drawlayerdots=function(){$1.pixsorig=$1.pixs;$1.pixs=$k[--$j];$$.newpath();for(var _3p=0,_3o=$1.pixs.length-1;_3p<=_3o;_3p+=1){$1.x=_3p%$1.pixx;$1.y=~~(_3p/$1.pixx);$k[$j++]=$1.x;$k[$j++]=$1.y;$1.xyget();if($k[--$j]==1){$$.moveto($f($1.x+0.5),$f(($1.pixy-$1.y)-0.5));$$.arc($f($1.x+0.5),$f(($1.pixy-$1.y)-0.5),$f(0.5-$1.inkspread),0,360,1);}}
$$.fill();$1.pixs=$1.pixsorig;};$$.save();$1.inkspread=$1.inkspread/2;$1.inkspreadh=$1.inkspreadh/2;$1.inkspreadv=$1.inkspreadv/2;var _46=$$.currpos();$$.translate(_46.x,_46.y);$$.scale(($1.width/$1.pixx)*72,($1.height/$1.pixy)*72);$$.moveto(0,0);$$.lineto($1.pixx,0);$$.lineto($1.pixx,$1.pixy);$$.lineto(0,$1.pixy);$$.closepath();if($eq($1.colormap,"unset")){var _4H=new Map([[1,$1.barcolor]]);$1.colormap=_4H;}
var _4I=$1.colormap;for(var _4N=_4I.size,_4M=_4I.keys(),_4L=0;_4L<_4N;_4L++){var _4J=_4M.next().value;$$.setcolor(_4I.get(_4J));$1.key=_4J;$k[$j++]=Infinity;var _4O=$1.pixs;for(var _4P=0,_4Q=_4O.length;_4P<_4Q;_4P++){var _4T=$eq($get(_4O,_4P),$1.key)?1:0;$k[$j++]=_4T;}
var _4U=$a();$k[$j++]=_4U;if($1.dotty){$1.drawlayerdots();}else{$1.drawlayer();}}
if($ne($1.textcolor,"unset")){$$.setcolor($1.textcolor);}
if($1.includetext){if(($eq($1.textxalign,"unset")&&$eq($1.textyalign,"unset"))&&$eq($1.alttext,"")){$1.s=0;$1.fn="";var _4c=$1.txt;for(var _4d=0,_4e=_4c.length;_4d<_4e;_4d++){$forall($get(_4c,_4d));var _4g=$k[--$j];var _4h=$k[--$j];$k[$j++]=_4h;$k[$j++]=_4g;if((_4g!=$1.s)||$ne(_4h,$1.fn)){var _4k=$k[--$j];var _4l=$k[--$j];$1.s=_4k;$1.fn=_4l;$$.selectfont(_4l,_4k);}else{$j-=2;}
var _4m=$k[--$j];$$.moveto($k[--$j],_4m);$$.show($k[--$j],0,0);}}else{$$.selectfont($1.textfont,$1.textsize);if($eq($1.alttext,"")){$k[$j++]=Infinity;var _4s=$1.txt;for(var _4t=0,_4u=_4s.length;_4t<_4u;_4t++){$forall($get($get(_4s,_4t),0));}
$1.txt=$a();$1.tstr=$s($1.txt.length);for(var _52=0,_51=$1.txt.length-1;_52<=_51;_52+=1){$put($1.tstr,_52,$get($1.txt,_52));}}else{$1.tstr=$1.alttext;}
if($1.tstr.length==0){$k[$j++]=0;}else{$$.save();$$.newpath();$$.moveto(0,0);$$.charpath("0",false);var _58=$$.pathbbox();$$.restore();$k[$j++]=_58.ury;}
$1.textascent=$k[--$j];var _5B=$$.stringwidth($1.tstr);$1.textwidth=$f(_5B.w+(($1.tstr.length-1)*$1.textgaps));$1.textxpos=$f($1.textxoffset+($f($1.x-$1.textwidth)/2));if($eq($1.textxalign,"left")){$1.textxpos=$1.textxoffset;}
if($eq($1.textxalign,"right")){$1.textxpos=$f($f($1.x-$1.textxoffset)-$1.textwidth);}
if($eq($1.textxalign,"offleft")){$1.textxpos=-$f($1.textwidth+$1.textxoffset);}
if($eq($1.textxalign,"offright")){$1.textxpos=$f($1.x+$1.textxoffset);}
if($eq($1.textxalign,"justify")&&($1.textwidth<$1.x)){$1.textxpos=0;$1.textgaps=$f($1.x-$1.textwidth)/($1.tstr.length-1);}
$1.textypos=-($f($f($1.textyoffset+$1.textascent)+1));if($eq($1.textyalign,"above")){$1.textypos=$f($f($1.textyoffset+$1.pixy)+1);}
if($eq($1.textyalign,"center")){$1.textypos=$f($1.textyoffset+($f($1.pixy-$1.textascent)/2));}
$$.moveto($1.textxpos,$1.textypos);$$.show($1.tstr,$1.textgaps,0);}}
$$.restore();}
function $an(a,b){return(typeof a==='boolean')?a&&b:a&b;}
function $or(a,b){return(typeof a==='boolean')?a||b:a|b;}
function $astore(a){for(var i=0,l=a.length,b=a.b,o=a.o+l-1;i<l;i++){b[o-i]=$k[--$j];}
$k[$j++]=a;}
function $counttomark(){for(var i=$j-1;i>=0&&$k[i]!==Infinity;i--);return $j-i-1;}
function $lt(a,b){if(a instanceof Uint8Array){a=$z(a);}
if(b instanceof Uint8Array){b=$z(b);}
return a<b;}
function $gt(a,b){if(a instanceof Uint8Array){a=$z(a);}
if(b instanceof Uint8Array){b=$z(b);}
return a>b;}
var FontLib=(function(){var fonts=[];var names={};var glyphcache={};var glyphmru={};var glyphcount=0;glyphmru.next=glyphmru;glyphmru.prev=glyphmru;return{lookup:lookup,monochrome:monochrome,getglyph:getglyph,getpaths:getpaths,loadFont:loadFont,};function loadFont(name){var multx=100;var multy=100;var data=null;if(arguments.length==2){data=arguments[1];}else if(arguments.length==3){multx=multy=+arguments[1]||100;data=arguments[2];}else if(arguments.length==4){multy=+arguments[1]||100;multx=+arguments[2]||100;data=arguments[3];}else{throw new Error("loadFont(): invalid number of arguments");}
var font=STBTT.InitFont(toUint8Array(data));font.bwipjs_name=name;font.bwipjs_multx=multx;font.bwipjs_multy=multy;var fontid=fonts.push(font)-1;names[name.toUpperCase()]=fontid;return fontid;}
function lookup(name){var fontid=names[name.toUpperCase()];return fontid===undefined?1:fontid;}
function monochrome(mono){if(mono){throw new Error('fontlib: monochrome not implemented');}}
function getglyph(fontid,charcode,width,height){fontid=fontid|0;charcode=charcode|0;width=+width;height=+height;if(!width||width<8){width=8;}
if(!height||height<8){height=width;}
if(fontid<0||fontid>=fonts.length){fontid=1;}
if(!charcode||charcode<32){charcode=32;}
var cachekey=''+fontid+'c'+charcode+'w'+width+'h'+height;var glyph=glyphcache[cachekey];if(glyph){glyph.prev.next=glyph.next;glyph.next.prev=glyph.prev;var sntl=glyphmru;sntl.next.prev=glyph;glyph.next=sntl.next;glyph.prev=sntl;sntl.next=glyph;return glyph;}
var font=fonts[fontid];var glyph=STBTT.GetGlyph(font,charcode,width*font.bwipjs_multx/100,height*font.bwipjs_multy/100);glyph.bytes=glyph.pixels;glyph.cachekey=cachekey;glyph.offset=0;if(glyphcount>250){var sntl=glyphmru;var temp=sntl.prev;temp.prev.next=sntl;sntl.prev=temp.prev;temp.next=temp.prev=null;delete glyphcache[temp.cachekey];}else{glyphcount++;}
glyphcache[cachekey]=glyph;var sntl=glyphmru;sntl.next.prev=glyph;glyph.next=sntl.next;glyph.prev=sntl;sntl.next=glyph;return glyph;}
function getpaths(fontid,charcode,width,height){fontid=fontid|0;charcode=charcode|0;width=+width;height=+height;if(!width||width<8){width=8;}
if(!height||height<8){height=width;}
if(fontid<0||fontid>=fonts.length){fontid=1;}
if(!charcode||charcode<32){charcode=32;}
var font=fonts[fontid];return STBTT.GetPaths(font,charcode,width*font.bwipjs_multx/100,height*font.bwipjs_multy/100);}})();module.exports={toCanvas:ToCanvas}